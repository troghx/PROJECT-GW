/* CREDITORS - DRAG & DROP PREMIUM */

/* Header con estilo profesional */
#creditorsHeaderRow {
  background: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.02) 100%);
  border-bottom: 2px solid rgba(255,255,255,0.1);
}

#creditorsHeaderRow th {
  cursor: grab;
  user-select: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  padding: 8px 6px !important;
  font-size: 10px !important;
  font-weight: 600 !important;
  letter-spacing: 0.8px !important;
  text-transform: uppercase;
  color: rgba(255,255,255,0.7);
  border-right: 1px solid rgba(255,255,255,0.05);
  overflow: hidden;
}

#creditorsHeaderRow th:last-child {
  border-right: none;
}

/* Icono de agarre elegante */
#creditorsHeaderRow th::before {
  content: '';
  position: absolute;
  left: 3px;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 12px;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.15) 0px,
    rgba(255,255,255,0.15) 1px,
    transparent 1px,
    transparent 3px
  );
  opacity: 0;
  transition: opacity 0.3s ease;
}

#creditorsHeaderRow th:hover::before {
  opacity: 1;
}

/* Hover suave */
#creditorsHeaderRow th:hover {
  background: rgba(255,255,255,0.08);
  color: rgba(255,255,255,0.95);
}

/* Estado arrastrando - Elevación premium */
#creditorsHeaderRow th.dragging {
  opacity: 0.95;
  cursor: grabbing;
  background: linear-gradient(135deg, rgba(59,130,246,0.25), rgba(37,99,235,0.15)) !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3), 0 0 0 2px rgba(59,130,246,0.5);
  transform: scale(1.02) translateY(-2px);
  z-index: 100;
  border-radius: 6px;
  color: white !important;
}

/* Indicador de posición de drop - Línea elegante */
#creditorsHeaderRow th.drag-over {
  background: rgba(34,197,94,0.1) !important;
}

#creditorsHeaderRow th.drag-over::after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, #22c55e, #16a34a);
  box-shadow: 0 0 10px rgba(34,197,94,0.6);
  animation: pulseLine 1.5s ease-in-out infinite;
}

@keyframes pulseLine {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; box-shadow: 0 0 15px rgba(34,197,94,0.9); }
}

/* Animación de éxito al soltar */
#creditorsHeaderRow th.drop-success {
  animation: dropSuccess 0.5s ease;
}

@keyframes dropSuccess {
  0% { background: rgba(34,197,94,0.3); }
  100% { background: transparent; }
}

/* Efecto shimmer en headers */
#creditorsHeaderRow th::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.05),
    transparent
  );
  transition: left 0.6s ease;
}

#creditorsHeaderRow th:hover::after {
  left: 100%;
}

/* ===== LIGHT MODE PREMIUM ===== */
body.theme-light #creditorsHeaderRow {
  background: linear-gradient(180deg, rgba(15,23,42,0.05) 0%, rgba(15,23,42,0.02) 100%);
  border-bottom: 2px solid rgba(15,23,42,0.1);
}

body.theme-light #creditorsHeaderRow th {
  color: rgba(15,23,42,0.6);
  border-right: 1px solid rgba(15,23,42,0.06);
}

body.theme-light #creditorsHeaderRow th::before {
  background: repeating-linear-gradient(
    to bottom,
    rgba(15,23,42,0.2) 0px,
    rgba(15,23,42,0.2) 1px,
    transparent 1px,
    transparent 3px
  );
}

body.theme-light #creditorsHeaderRow th:hover {
  background: rgba(15,23,42,0.05);
  color: rgba(15,23,42,0.85);
}

body.theme-light #creditorsHeaderRow th.dragging {
  background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(37,99,235,0.1)) !important;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15), 0 0 0 2px rgba(59,130,246,0.4);
  color: #1d4ed8 !important;
}

body.theme-light #creditorsHeaderRow th.drag-over {
  background: rgba(34,197,94,0.08) !important;
}

/* ===== RESTO DE ESTILOS ===== */
.creditors-glass-container { display: flex; flex-direction: column; gap: 4px !important; padding: 0 !important; }

.creditors-summary-inline { display: flex; align-items: center; justify-content: space-between; gap: 8px; padding: 2px 0 !important; margin: 0 !important; margin-bottom: 2px !important; }
.summary-badges-wrap { display: flex; flex-direction: column; gap: 3px; min-width: 0; }

.summary-badges { display: flex; gap: 4px; flex-wrap: wrap; }
.summary-badges-party { gap: 4px; }

.summary-badge { display: inline-flex; align-items: baseline; gap: 3px; padding: 2px 8px; border-radius: 6px; font-size: 0.68rem; border: 1px solid; line-height: 1.1; transition: all 0.2s ease; }
.summary-badge:hover { transform: translateY(-1px); }

.summary-badge small { font-size: 0.54rem; text-transform: uppercase; letter-spacing: 0.5px; opacity: 0.85; }
.summary-badge strong { font-weight: 700; font-size: 0.78rem; }

.summary-badge.total { background: rgba(59,130,246,0.2); border-color: rgba(59,130,246,0.35); color: rgba(126,234,252,0.95); }
.summary-badge.count { background: rgba(148,163,184,0.2); border-color: rgba(148,163,184,0.35); color: rgba(203,213,225,0.9); }
.summary-badge.included { background: rgba(34,197,94,0.18); border-color: rgba(34,197,94,0.35); color: rgba(74,222,128,0.95); }
.summary-badge.pastdue { background: rgba(239,68,68,0.18); border-color: rgba(239,68,68,0.35); color: rgba(248,113,113,0.95); }
.summary-badge.fico { background: rgba(245,158,11,0.18); border-color: rgba(245,158,11,0.35); color: rgba(253,224,71,0.95); }
.summary-badge.party-applicant-debt { background: rgba(6,182,212,0.17); border-color: rgba(6,182,212,0.35); color: rgba(103,232,249,0.95); }
.summary-badge.party-applicant-fico { background: rgba(14,165,233,0.15); border-color: rgba(14,165,233,0.34); color: rgba(125,211,252,0.95); }
.summary-badge.party-coapp-debt { background: rgba(168,85,247,0.16); border-color: rgba(168,85,247,0.35); color: rgba(216,180,254,0.95); }
.summary-badge.party-coapp-fico { background: rgba(217,70,239,0.15); border-color: rgba(217,70,239,0.34); color: rgba(245,208,254,0.95); }

body.theme-light .summary-badge.total { background: rgba(37,99,235,0.15) !important; border-color: rgba(37,99,235,0.4) !important; color: #1d4ed8 !important; }
body.theme-light .summary-badge.count { background: rgba(100,116,139,0.15) !important; border-color: rgba(100,116,139,0.4) !important; color: #475569 !important; }
body.theme-light .summary-badge.included { background: rgba(22,163,74,0.15) !important; border-color: rgba(22,163,74,0.4) !important; color: #15803d !important; }
body.theme-light .summary-badge.pastdue { background: rgba(220,38,38,0.15) !important; border-color: rgba(220,38,38,0.4) !important; color: #b91c1c !important; }
body.theme-light .summary-badge.fico { background: rgba(217,119,6,0.14) !important; border-color: rgba(217,119,6,0.38) !important; color: #b45309 !important; }
body.theme-light .summary-badge.party-applicant-debt { background: rgba(8,145,178,0.14) !important; border-color: rgba(8,145,178,0.34) !important; color: #0e7490 !important; }
body.theme-light .summary-badge.party-applicant-fico { background: rgba(2,132,199,0.14) !important; border-color: rgba(2,132,199,0.34) !important; color: #0369a1 !important; }
body.theme-light .summary-badge.party-coapp-debt { background: rgba(147,51,234,0.14) !important; border-color: rgba(147,51,234,0.34) !important; color: #7e22ce !important; }
body.theme-light .summary-badge.party-coapp-fico { background: rgba(192,38,211,0.13) !important; border-color: rgba(192,38,211,0.32) !important; color: #a21caf !important; }

.btn-apply-calc { display: inline-flex; align-items: center; gap: 5px; padding: 4px 10px; border: none; border-radius: 7px; background: linear-gradient(135deg, rgba(59,130,246,0.9), rgba(37,99,235,0.95)); color: white; font-size: 0.72rem; font-weight: 600; cursor: pointer; white-space: nowrap; transition: all 0.2s ease; }
.btn-apply-calc:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(37,99,235,0.35); }

.creditors-saved-section { padding: 0 !important; margin: 0 !important; margin-top: 1px !important; }

#creditorsSavedTable { table-layout: fixed !important; width: 100% !important; border-collapse: collapse !important; }

#creditorsSavedTable th, #creditorsSavedTable td { padding: 3px 3px !important; font-size: 11px !important; line-height: 1.15 !important; white-space: nowrap !important; overflow: hidden !important; text-overflow: ellipsis !important; transition: background-color 0.15s ease; }

#creditorsSavedTable tbody tr { transition: background-color 0.15s ease; }
#creditorsSavedTable tbody tr:hover { background: rgba(255,255,255,0.04); }
body.theme-light #creditorsSavedTable tbody tr:hover { background: rgba(15,23,42,0.03); }

#creditorsSavedTable .col-checkbox { width: 24px !important; text-align: center !important; padding-left: 5px !important; padding-right: 5px !important; overflow: visible !important; }
#creditorsSavedTable td.col-checkbox { cursor: pointer !important; }
#creditorsSavedTable .col-num { width: 22px !important; text-align: center !important; padding-left: 2px !important; padding-right: 4px !important; }
#creditorsSavedTable .col-name { width: 20% !important; text-align: left !important; }
#creditorsSavedTable .col-debt { width: 10% !important; text-align: center !important; }
#creditorsSavedTable .col-party { width: 11% !important; text-align: center !important; }
#creditorsSavedTable .col-account { width: 14% !important; text-align: center !important; }
#creditorsSavedTable .col-resp { width: 9% !important; text-align: center !important; }
#creditorsSavedTable .col-status { width: 11% !important; text-align: center !important; }
#creditorsSavedTable .col-type { width: 11% !important; text-align: center !important; }
#creditorsSavedTable .col-months { width: 7% !important; text-align: center !important; }
#creditorsSavedTable .col-past-due { width: 10% !important; text-align: right !important; }
#creditorsSavedTable .col-actions { width: 26px !important; text-align: center !important; }

#creditorsSavedTable .debt-cell-inline {
  display: inline-flex;
  align-items: center;
  justify-content: flex-end;
  gap: 4px;
  width: 100%;
}

#creditorsSavedTable .debt-value {
  font-variant-numeric: tabular-nums;
}

#creditorsSavedTable .debt-share-pill {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 999px;
  font-size: 9px;
  line-height: 1;
  letter-spacing: 0.2px;
  font-weight: 700;
  background: rgba(34, 197, 94, 0.16);
  border: 1px solid rgba(74, 222, 128, 0.28);
  color: rgba(110, 231, 183, 0.95);
}

.badge { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 9px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.3px; line-height: 1; }

.creditors-empty-status { padding: 10px 12px !important; }
.creditors-empty-status .status-text { font-size: 0.74rem !important; line-height: 1.25 !important; }

.badge-status-open { background: rgba(34,197,94,0.2); color: #22c55e; }
.badge-status-closed { background: rgba(148,163,184,0.2); color: #94a3b8; }
.badge-status-chargeoff { background: rgba(239,68,68,0.2); color: #ef4444; }
.badge-status-collection { background: rgba(249,115,22,0.2); color: #f97316; }
.badge-type { background: rgba(59,130,246,0.15); color: #3b82f6; }
.badge-resp { background: rgba(168,85,247,0.15); color: #a855f7; }
.badge-months { background: rgba(245,158,11,0.15); color: #f59e0b; }

.col-account { position: relative; text-align: center !important; }
.account-num { display: inline-block; max-width: calc(100% - 18px); margin: 0 auto; overflow: hidden; text-overflow: ellipsis; vertical-align: middle; }
.btn-copy-account { display: inline-flex; align-items: center; justify-content: center; width: 16px; height: 16px; padding: 0; border: none; border-radius: 3px; background: transparent; color: rgba(255,255,255,0.4); cursor: pointer; opacity: 0; margin-left: 0; position: absolute; right: 3px; top: 50%; transform: translateY(-50%); transition: all 0.15s ease; }
tr:hover .btn-copy-account { opacity: 1; }
.btn-copy-account:hover { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); }
.btn-copy-account.copied { color: #22c55e; opacity: 1; }

.btn-header-icon { width: 20px; height: 20px; padding: 0; border: 1px solid rgba(255,255,255,0.15); border-radius: 4px; background: rgba(255,255,255,0.05); color: rgba(255,255,255,0.6); cursor: pointer; display: inline-flex; align-items: center; justify-content: center; transition: all 0.15s ease; }
.btn-header-icon:hover { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.9); transform: scale(1.05); }

body.theme-light .btn-copy-account { color: rgba(15,23,42,0.3); }
body.theme-light .btn-copy-account:hover { background: rgba(15,23,42,0.08); color: rgba(15,23,42,0.7); }
body.theme-light #creditorsSavedTable .debt-share-pill {
  background: rgba(22, 163, 74, 0.12);
  border-color: rgba(22, 163, 74, 0.22);
  color: rgba(22, 101, 52, 0.95);
}
/* Sin animación global en filas/celdas: solo checkbox */
#creditorsSavedBody td {
  transition: background-color 0.15s ease;
}

#creditorsSavedBody tr {
  animation: none !important;
}

/* Indicador de drop posición */
#creditorsHeaderRow th.drag-over::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(180deg, #22c55e, #4ade80);
  box-shadow: 0 0 12px rgba(34,197,94,0.6);
  animation: dropIndicator 0.6s ease-in-out infinite;
}

#creditorsHeaderRow th.drag-over[data-drop-position='before']::before {
  left: 0;
}

#creditorsHeaderRow th.drag-over[data-drop-position='after']::before {
  right: 0;
  left: auto;
}

@keyframes dropIndicator {
  0%, 100% { 
    opacity: 0.7;
    box-shadow: 0 0 8px rgba(34,197,94,0.4);
  }
  50% { 
    opacity: 1;
    box-shadow: 0 0 16px rgba(34,197,94,0.8);
  }
}

/* Sombra de columna arrastrada */
#creditorsHeaderRow th.dragging {
  box-shadow: 
    0 12px 40px rgba(0,0,0,0.4),
    0 0 0 1px rgba(59,130,246,0.3),
    inset 0 1px 0 rgba(255,255,255,0.1) !important;
}

body.theme-light #creditorsHeaderRow th.dragging {
  box-shadow: 
    0 12px 32px rgba(0,0,0,0.15),
    0 0 0 1px rgba(59,130,246,0.25),
    inset 0 1px 0 rgba(255,255,255,0.8) !important;
}

/* Efecto de pulso en el header al reordenar */
#creditorsHeaderRow.th-reordered th {
  animation: headerPulse 0.4s ease;
}

@keyframes headerPulse {
  0% { background: rgba(59,130,246,0.1); }
  100% { background: transparent; }
}

/* Mejora de checkboxes */
.row-checkbox {
  width: 11px;
  height: 11px;
  min-width: 11px;
  min-height: 11px;
  padding: 0;
  border: 1.2px solid rgba(203, 213, 225, 0.7);
  border-radius: 999px;
  background: transparent;
  cursor: pointer;
  transition: border-color 0.16s ease, background-color 0.16s ease, transform 0.16s ease;
  position: relative;
  display: block;
  vertical-align: middle;
  margin: 0 auto;
  line-height: 0;
}

.row-checkbox:hover {
  border-color: rgba(10, 132, 255, 0.95);
  transform: none;
}

.row-checkbox.is-checked {
  background: rgba(10, 132, 255, 0.98);
  border-color: rgba(10, 132, 255, 0.98);
  animation: checkbox-pop 200ms cubic-bezier(0.2, 0.9, 0.25, 1);
}

.row-checkbox.is-checked::after {
  content: '';
  position: absolute;
  left: 3px;
  top: 1px;
  width: 3px;
  height: 6px;
  border: solid rgba(255, 255, 255, 0.98);
  border-width: 0 1.5px 1.5px 0;
  opacity: 0;
  transform: rotate(45deg) scale(0.4);
  transform-origin: center;
  animation: checkbox-check 180ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.row-checkbox:focus-visible {
  outline: none;
  box-shadow: 0 0 0 1px rgba(10, 132, 255, 0.3);
}

.row-checkbox:disabled {
  cursor: not-allowed;
  opacity: 0.4;
  pointer-events: none;
  animation: none !important;
}

body.theme-light .row-checkbox {
  border-color: rgba(30, 41, 59, 0.62);
  background: transparent;
}

body.theme-light .row-checkbox:hover {
  border-color: rgba(10, 132, 255, 0.95);
}

body.theme-light .row-checkbox.is-checked {
  background: rgba(10, 132, 255, 0.96);
  border-color: rgba(10, 132, 255, 0.96);
}

#creditorsSavedTable tbody tr.coapp-inactive {
  opacity: 0.56;
}

#creditorsSavedTable tbody tr.coapp-inactive:hover {
  background: rgba(255,255,255,0.02);
}

body.theme-light #creditorsSavedTable tbody tr.coapp-inactive:hover {
  background: rgba(15,23,42,0.02);
}

@keyframes checkbox-pop {
  0% { transform: scale(0.92); }
  65% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

@keyframes checkbox-check {
  0% { opacity: 0; transform: rotate(45deg) scale(0.4); }
  100% { opacity: 1; transform: rotate(45deg) scale(1); }
}

/* Badges de partido mejorados */
.badge-party-applicant {
  background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(37,99,235,0.15));
  color: #60a5fa;
  border: 1px solid rgba(59,130,246,0.3);
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 9px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

.badge-party-coapp {
  background: linear-gradient(135deg, rgba(168,85,247,0.2), rgba(147,51,234,0.15));
  color: #c084fc;
  border: 1px solid rgba(168,85,247,0.3);
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 9px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

body.theme-light .badge-party-applicant {
  background: linear-gradient(135deg, rgba(37,99,235,0.15), rgba(29,78,216,0.1));
  color: #1d4ed8;
  border-color: rgba(37,99,235,0.35);
}

body.theme-light .badge-party-coapp {
  background: linear-gradient(135deg, rgba(147,51,234,0.15), rgba(126,34,206,0.1));
  color: #7c3aed;
  border-color: rgba(147,51,234,0.35);
}

/* Botón de borrar mejorado */
.btn-delete {
  width: 20px;
  height: 20px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(239,68,68,0.6);
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-delete:hover {
  background: rgba(239,68,68,0.15);
  color: #ef4444;
  transform: scale(1.1);
}

.btn-delete:active {
  transform: scale(0.95);
}

.btn-delete:disabled {
  opacity: 0.35;
  cursor: not-allowed;
  transform: none !important;
  background: transparent !important;
}

/* Botones de header mejorados */
.btn-header-icon {
  width: 20px;
  height: 20px;
  padding: 0;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 5px;
  background: rgba(255,255,255,0.04);
  color: rgba(255,255,255,0.5);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-header-icon:hover {
  background: rgba(255,255,255,0.1);
  color: rgba(255,255,255,0.9);
  border-color: rgba(255,255,255,0.25);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.btn-header-icon:active {
  transform: translateY(0);
}

body.theme-light .btn-header-icon {
  border-color: rgba(15,23,42,0.12);
  background: rgba(15,23,42,0.03);
  color: rgba(15,23,42,0.45);
}

body.theme-light .btn-header-icon:hover {
  background: rgba(15,23,42,0.08);
  color: rgba(15,23,42,0.8);
  border-color: rgba(15,23,42,0.2);
}

/* Efecto de carga suave para la tabla */
@keyframes tableFadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

#creditorsTable {
  animation: tableFadeIn 0.4s ease;
}
