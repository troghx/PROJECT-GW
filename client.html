<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle del Cliente | Cero Deuda</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Tenor+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css?v=20260216e">
  <link rel="stylesheet" href="creditors-compact.css?v=20260217k">
  <link rel="stylesheet" href="creditors-final.css?v=20260218e">
  <link rel="stylesheet" href="budget.css?v=20260219d">
  <style>
    :root {
      --lead-viewport-height: 100vh;
    }

    @supports (height: 100dvh) {
      :root {
        --lead-viewport-height: 100dvh;
      }
    }

    /* Wrapper principal - Scroll interno si es necesario */
    .lead-view-wrapper {
      width: 100%;
      min-height: var(--lead-viewport-height);
      height: var(--lead-viewport-height);
      position: relative;
      z-index: 1;
      overflow-y: auto;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .lead-floating {
      width: calc(100% - clamp(12px, 2vw, 28px));
      margin: clamp(8px, 1.2vh, 16px) auto;
      display: grid;
      grid-template-columns: auto 1fr auto;
      grid-template-rows: auto minmax(0, 1fr);
      gap: 8px clamp(12px, 2vw, 24px);
      align-items: start;
      flex: 1;
      min-height: 0;
    }
    
    /* Logo igual que dashboard */
    .lead-logo {
      grid-column: 1;
      grid-row: 1;
      width: clamp(70px, 5vw, 100px);
      display: block;
      justify-self: start;
      align-self: center;
      position: relative;
      z-index: 5;
      background: none;
      border: none;
      padding: 0;
      cursor: pointer;
    }

    .lead-logo img {
      width: 100%;
      height: auto;
      display: block;
    }

    .lead-logo:focus-visible {
      outline: 2px solid var(--accent, #7eeafc);
      outline-offset: 4px;
      border-radius: 8px;
    }
    
    /* Toolbar en misma posición que dashboard */
    .lead-floating .toolbar-wrap {
      grid-column: 2;
      grid-row: 1;
      justify-self: center;
    }
    
    /* Home actions en misma posición */
    .lead-floating .home-actions {
      grid-column: 3;
      grid-row: 1;
      justify-self: end;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    /* Contenido del lead debajo del toolbar */
    .lead-content-area {
      grid-column: 1 / -1;
      grid-row: 2;
      padding: clamp(10px, 1.8vh, 18px) clamp(12px, 2vw, 24px) clamp(18px, 2.5vh, 24px);
      position: relative;
      z-index: 2;
      min-height: 0;
    }
    
    /* Header del Lead */
    .lead-header {
      padding-bottom: 16px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      position: relative;
      z-index: 3;
      flex-shrink: 0;
    }
    
    /* Sección del nombre */
    .lead-title-section {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }
    
    /* Nombre del cliente editable */
    .lead-name-wrapper {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .lead-name-text {
      font-size: clamp(1.5rem, 3vw, 2rem);
      font-weight: 600;
      color: white;
      background: transparent;
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 4px 12px;
      margin: 0;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 150px;
      display: inline-block;
      position: relative;
      z-index: 4;
    }
    
    .lead-name-text:hover {
      border-color: rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.05);
    }
    
    .lead-name-text.editing {
      border-color: rgba(255, 255, 255, 0.4);
      background: rgba(255, 255, 255, 0.1);
      cursor: text;
    }
    
    .lead-name-text:focus {
      outline: none;
      border-color: var(--accent, #7eeafc);
      background: rgba(255, 255, 255, 0.1);
    }
    
    /* Botón de cambio Applicant/Co-Applicant */
    .applicant-toggle-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 0;
      flex-shrink: 0;
    }
    
    .applicant-toggle-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }
    
    .applicant-toggle-btn svg {
      width: 16px;
      height: 16px;
      transition: transform 0.3s ease;
    }
    
    .applicant-toggle-btn.rotated svg {
      transform: rotate(180deg);
    }
    
    .applicant-type-label {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
      padding: 4px 8px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    
    .applicant-type-label.co-applicant {
      background: rgba(59, 130, 246, 0.15);
      border-color: rgba(59, 130, 246, 0.3);
      color: #60a5fa;
    }
    
    /* Botón de copiar nombre - solo icono, sin box (igual que copy-icon-btn) */
    .copy-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      background: transparent;
      border: none;
      color: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 0;
      margin-left: 4px;
    }
    
    .copy-btn:hover {
      color: white;
      transform: scale(1.1);
    }
    
    .copy-btn svg {
      width: 18px;
      height: 18px;
    }
    
    .copy-btn.copied {
      color: #4ade80;
    }
    
    /* Badge de State Type (Green/Red) */
    .lead-state-badge {
      font-size: 0.85rem;
      font-weight: 600;
      padding: 6px 14px;
      border-radius: 20px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: inline-block;
      position: relative;
      z-index: 4;
    }
    
    .lead-state-badge.green {
      background: rgba(34, 197, 94, 0.2);
      color: #4ade80;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }
    
    .lead-state-badge.red {
      background: rgba(239, 68, 68, 0.2);
      color: #f87171;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .lead-status-badge-select {
      appearance: none;
      color-scheme: dark;
      font-size: 0.78rem;
      font-weight: 600;
      padding: 6px 26px 6px 12px;
      border-radius: 20px;
      border: 1px solid rgba(59, 130, 246, 0.34);
      background:
        linear-gradient(135deg, rgba(30, 64, 175, 0.25), rgba(30, 64, 175, 0.18)),
        rgba(30, 64, 175, 0.14);
      color: #bfdbfe;
      letter-spacing: 0.2px;
      min-width: 170px;
      max-width: 220px;
      cursor: pointer;
      position: relative;
      z-index: 4;
      transition: border-color 0.2s ease, transform 0.2s ease;
    }

    .lead-status-badge-select option {
      background: #0f172a;
      color: #e2e8f0;
      font-weight: 600;
    }

    .lead-status-badge-select:hover {
      transform: translateY(-1px);
      border-color: rgba(96, 165, 250, 0.6);
    }

    .lead-status-badge-select:focus {
      outline: none;
      border-color: rgba(125, 211, 252, 0.7);
      box-shadow: 0 0 0 2px rgba(125, 211, 252, 0.2);
    }

    .lead-status-badge-select:disabled {
      opacity: 0.65;
      cursor: wait;
      transform: none;
    }

    .lead-status-badge-select.new {
      border-color: rgba(59, 130, 246, 0.34);
      color: #bfdbfe;
    }

    .lead-status-badge-select.submitted {
      border-color: rgba(16, 185, 129, 0.36);
      background:
        linear-gradient(135deg, rgba(16, 185, 129, 0.24), rgba(16, 185, 129, 0.16)),
        rgba(16, 185, 129, 0.12);
      color: #a7f3d0;
    }

    .lead-status-badge-select.docs {
      border-color: rgba(245, 158, 11, 0.36);
      background:
        linear-gradient(135deg, rgba(245, 158, 11, 0.24), rgba(245, 158, 11, 0.16)),
        rgba(245, 158, 11, 0.12);
      color: #fde68a;
    }

    .lead-status-badge-select.manager {
      border-color: rgba(139, 92, 246, 0.36);
      background:
        linear-gradient(135deg, rgba(139, 92, 246, 0.24), rgba(139, 92, 246, 0.16)),
        rgba(139, 92, 246, 0.12);
      color: #ddd6fe;
    }

    .lead-status-badge-select.callback {
      border-color: rgba(236, 72, 153, 0.36);
      background:
        linear-gradient(135deg, rgba(236, 72, 153, 0.24), rgba(236, 72, 153, 0.16)),
        rgba(236, 72, 153, 0.12);
      color: #fbcfe8;
    }

    .lead-status-badge-select.negative {
      border-color: rgba(239, 68, 68, 0.38);
      background:
        linear-gradient(135deg, rgba(239, 68, 68, 0.24), rgba(239, 68, 68, 0.16)),
        rgba(239, 68, 68, 0.12);
      color: #fecaca;
    }
    
    /* Badge de Test */
    .lead-test-badge {
      font-size: 0.75rem;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 12px;
      background: rgba(168, 85, 247, 0.2);
      color: #c084fc;
      border: 1px solid rgba(168, 85, 247, 0.3);
      text-transform: uppercase;
      display: inline-block;
      position: relative;
      z-index: 4;
    }

    .lead-related-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.78rem;
      font-weight: 600;
      padding: 5px 12px;
      border-radius: 14px;
      border: 1px solid rgba(125, 211, 252, 0.35);
      background: rgba(56, 189, 248, 0.14);
      color: #7dd3fc;
      text-decoration: none;
      position: relative;
      z-index: 4;
      transition: background 0.2s ease;
    }

    .lead-related-badge:hover {
      background: rgba(56, 189, 248, 0.24);
    }

    .lead-related-badge svg {
      width: 13px;
      height: 13px;
      flex-shrink: 0;
    }
    
    /* Case ID debajo del nombre */
    .lead-case-id {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.6);
      margin-left: 12px;
    }
    
    .case-id-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .lead-case-id .case-label {
      font-weight: 500;
    }
    
    .lead-case-id .case-number {
      font-family: 'Inter', monospace;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 600;
    }
    
    /* Botones de acción al lado del Case ID */
    .case-id-actions {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .lead-assignee-wrap {
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }

    .lead-assignee-meta {
      position: relative;
      display: flex;
      align-items: center;
      gap: 6px;
      min-width: 0;
    }

    .lead-assignee-label {
      font-size: 0.68rem;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      color: rgba(255, 255, 255, 0.45);
      white-space: nowrap;
    }

    .lead-assignee-combo {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      min-width: 0;
    }

    .lead-assignee-input {
      width: 165px;
      max-width: 190px;
      border: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 0;
      background: transparent;
      color: rgba(255, 255, 255, 0.9);
      padding: 4px 0;
      font-size: 0.78rem;
      outline: none;
      transition: border-color 0.15s ease, color 0.15s ease;
    }

    .lead-assignee-input:focus {
      border-color: rgba(126, 234, 252, 0.7);
      color: rgba(255, 255, 255, 1);
    }

    .lead-assignee-toggle {
      width: 18px;
      height: 18px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.62);
      padding: 0;
      cursor: pointer;
      transition: color 0.15s ease, transform 0.15s ease;
    }

    .lead-assignee-toggle:hover {
      color: rgba(126, 234, 252, 0.9);
      transform: translateY(-1px);
    }

    .lead-assignee-toggle svg {
      width: 12px;
      height: 12px;
      pointer-events: none;
    }

    .lead-assignee-suggestions {
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      min-width: 220px;
      max-height: 210px;
      overflow: auto;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(15, 23, 42, 0.92);
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.35);
      padding: 4px;
      z-index: 35;
    }

    .lead-assignee-option {
      width: 100%;
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.88);
      text-align: left;
      padding: 7px 9px;
      border-radius: 7px;
      font-size: 0.78rem;
      cursor: pointer;
    }

    .lead-assignee-option:hover,
    .lead-assignee-option.active {
      background: rgba(126, 234, 252, 0.14);
      color: #e0f2fe;
    }

    .lead-assignee-empty {
      padding: 8px 9px;
      font-size: 0.74rem;
      color: rgba(255, 255, 255, 0.55);
    }

    .lead-assignee-confirm {
      border: none;
      border-radius: 0;
      background: transparent;
      color: rgba(74, 222, 128, 0.95);
      padding: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: color 0.15s ease, transform 0.15s ease, opacity 0.15s ease;
    }

    .lead-assignee-confirm:hover {
      color: #86efac;
      transform: translateY(-1px);
    }

    .lead-assignee-confirm svg {
      width: 16px;
      height: 16px;
    }

    .lead-assignee-confirm:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      transform: none;
    }
    
    .action-icon-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 0;
    }
    
    .action-icon-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.25);
      color: white;
      transform: translateY(-1px);
    }
    
    .action-icon-btn:active {
      transform: translateY(0);
    }
    
    .action-icon-btn svg {
      width: 18px;
      height: 18px;
    }

    .notes-anchor {
      position: relative;
      display: inline-flex;
      align-items: center;
    }

    /* Files Panel - Similar a Notes Panel */
    .files-anchor {
      position: relative;
      display: inline-flex;
      align-items: center;
    }

    .files-panel {
      position: absolute;
      top: calc(100% + 12px);
      right: 0;
      width: min(420px, calc(100vw - 28px));
      max-height: min(72vh, 620px);
      display: flex;
      flex-direction: column;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      background:
        linear-gradient(155deg, rgba(21, 29, 44, 0.9) 0%, rgba(16, 23, 35, 0.88) 55%, rgba(10, 16, 26, 0.92) 100%),
        rgba(10, 16, 26, 0.9);
      backdrop-filter: blur(20px) saturate(130%);
      box-shadow:
        0 20px 42px rgba(0, 0, 0, 0.45),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
      z-index: 5000;
      overflow: visible;
    }

    .files-panel::before {
      content: "";
      position: absolute;
      top: -8px;
      right: 12px;
      width: 14px;
      height: 14px;
      background: rgba(21, 29, 44, 0.9);
      border-left: 1px solid rgba(255, 255, 255, 0.22);
      border-top: 1px solid rgba(255, 255, 255, 0.22);
      transform: rotate(45deg);
      z-index: -1;
    }

    .files-panel-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 14px 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .files-panel-title {
      font-size: 0.86rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.86);
    }

    .files-panel-close.modal-close-mac {
      position: static;
      width: 12px;
      height: 12px;
      margin-left: auto;
    }

    .files-panel-body {
      flex: 1;
      overflow-y: auto;
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    /* Upload Zone */
    .files-upload-zone {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 24px 16px;
      border: 2px dashed rgba(126, 234, 252, 0.3);
      border-radius: 12px;
      background: rgba(126, 234, 252, 0.05);
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }

    .files-upload-zone:hover {
      border-color: rgba(126, 234, 252, 0.5);
      background: rgba(126, 234, 252, 0.1);
    }

    .files-upload-zone svg {
      color: rgba(126, 234, 252, 0.8);
    }

    .files-upload-text {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.6);
      text-align: center;
    }

    .files-upload-input {
      position: absolute;
      inset: 0;
      opacity: 0;
      cursor: pointer;
    }

    /* Files List */
    .files-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .files-empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 32px 16px;
      color: rgba(255, 255, 255, 0.4);
      text-align: center;
    }

    .files-empty-state p {
      margin: 0;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .files-empty-state span {
      font-size: 0.75rem;
    }

    .file-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      transition: all 0.2s ease;
    }

    .file-item:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.15);
    }

    .file-icon {
      flex-shrink: 0;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(126, 234, 252, 0.15);
      border-radius: 8px;
      color: #7eeafc;
    }

    .file-info {
      flex: 1;
      min-width: 0;
    }

    .file-name {
      font-size: 0.85rem;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.9);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-meta {
      font-size: 0.7rem;
      color: rgba(255, 255, 255, 0.5);
    }

    .file-meta-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 6px;
      margin-top: 4px;
    }

    .file-meta-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 7px;
      border-radius: 999px;
      font-size: 0.62rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      font-weight: 700;
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: rgba(255, 255, 255, 0.86);
      background: rgba(255, 255, 255, 0.08);
    }

    .file-meta-badge.credit-report {
      border-color: rgba(59, 130, 246, 0.45);
      background: rgba(59, 130, 246, 0.22);
      color: rgba(191, 219, 254, 0.98);
    }

    .file-meta-badge.party-applicant {
      border-color: rgba(34, 197, 94, 0.45);
      background: rgba(34, 197, 94, 0.2);
      color: rgba(187, 247, 208, 0.98);
    }

    .file-meta-badge.party-coapp {
      border-color: rgba(245, 158, 11, 0.42);
      background: rgba(245, 158, 11, 0.22);
      color: rgba(254, 240, 138, 0.98);
    }

    .file-actions {
      display: flex;
      gap: 6px;
    }

    .file-btn {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 6px;
      color: rgba(255, 255, 255, 0.6);
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 0;
    }

    .file-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.25);
      color: white;
    }

    .file-btn.delete:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: rgba(239, 68, 68, 0.4);
      color: #f87171;
    }

    /* Miniatura de archivo en la lista */
    .file-thumbnail {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s ease;
    }

    .file-thumbnail:hover {
      border-color: rgba(126, 234, 252, 0.5);
      transform: scale(1.05);
    }

    .file-item.clickable {
      cursor: pointer;
    }

    .file-item.clickable:hover {
      background: rgba(126, 234, 252, 0.1);
    }

    /* Modal de visualización de archivos */
    .file-viewer-modal {
      position: fixed;
      inset: 0;
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .file-viewer-modal.hidden {
      display: none;
    }

    .file-viewer-modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
    }

    .file-viewer-modal-content {
      position: relative;
      width: min(90vw, 900px);
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: linear-gradient(155deg, rgba(21, 29, 44, 0.98) 0%, rgba(16, 23, 35, 0.96) 100%);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .file-viewer-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .file-viewer-modal-title {
      font-size: 1rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      padding-right: 20px;
    }

    .file-viewer-modal-close {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .file-viewer-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.25);
      color: white;
    }

    .file-viewer-modal-body {
      flex: 1;
      overflow: auto;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 300px;
    }

    .file-viewer-modal-body img {
      max-width: 100%;
      max-height: 70vh;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .file-viewer-modal-body iframe {
      width: 100%;
      height: 70vh;
      border: none;
      border-radius: 8px;
    }

    .file-viewer-modal-body .file-icon-large {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      color: rgba(255, 255, 255, 0.5);
    }

    .file-viewer-modal-body .file-icon-large svg {
      width: 80px;
      height: 80px;
    }

    .file-viewer-modal-body .file-icon-large p {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
    }

    .file-viewer-modal-footer {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 16px 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .file-viewer-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .file-viewer-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.3);
      color: white;
    }

    .file-viewer-btn.primary {
      background: linear-gradient(135deg, rgba(126, 234, 252, 0.9), rgba(59, 130, 246, 0.9));
      border-color: transparent;
      color: white;
    }

    .file-viewer-btn.primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    }

    /* Modal de clasificación de archivo */
    .file-meta-modal {
      position: fixed;
      inset: 0;
      z-index: 10020;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px;
    }

    .file-meta-modal.hidden {
      display: none;
    }

    .file-meta-modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.72);
      backdrop-filter: blur(6px);
    }

    .file-meta-modal-content {
      position: relative;
      width: min(520px, 94vw);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: linear-gradient(155deg, rgba(21, 29, 44, 0.98) 0%, rgba(16, 23, 35, 0.96) 100%);
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.45);
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .file-meta-modal-header h3 {
      margin: 0;
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 650;
    }

    .file-meta-modal-subtitle {
      margin: 6px 0 0;
      font-size: 0.76rem;
      color: rgba(255, 255, 255, 0.62);
      word-break: break-word;
    }

    .file-meta-modal-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .file-meta-field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .file-meta-field label {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: rgba(255, 255, 255, 0.56);
      font-weight: 600;
    }

    .file-meta-field select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(0, 0, 0, 0.26);
      color: rgba(255, 255, 255, 0.9);
      padding: 11px 12px;
      font-size: 0.86rem;
      outline: none;
    }

    .file-meta-field select:focus {
      border-color: rgba(59, 130, 246, 0.6);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }

    .file-meta-field.hidden {
      display: none;
    }

    .file-meta-modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    .file-meta-modal-btn {
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.86);
      padding: 8px 12px;
      font-size: 0.78rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .file-meta-modal-btn:hover {
      background: rgba(255, 255, 255, 0.14);
      color: #fff;
    }

    .file-meta-modal-btn.primary {
      border-color: transparent;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(37, 99, 235, 0.95));
      color: #fff;
    }

    /* Vista previa en upload zone */
    .files-upload-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 10px;
      max-height: 120px;
      overflow-y: auto;
    }

    .files-upload-preview-item {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      object-fit: cover;
      border: 2px solid rgba(126, 234, 252, 0.3);
    }

    .notes-panel {
      position: absolute;
      top: calc(100% + 12px);
      right: 0;
      width: min(420px, calc(100vw - 28px));
      max-height: min(72vh, 620px);
      display: flex;
      flex-direction: column;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      background:
        linear-gradient(155deg, rgba(21, 29, 44, 0.9) 0%, rgba(16, 23, 35, 0.88) 55%, rgba(10, 16, 26, 0.92) 100%),
        rgba(10, 16, 26, 0.9);
      backdrop-filter: blur(20px) saturate(130%);
      box-shadow:
        0 20px 42px rgba(0, 0, 0, 0.45),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
      z-index: 5000;
      overflow: visible;
    }

    .notes-panel::before {
      content: "";
      position: absolute;
      top: -8px;
      right: 12px;
      width: 14px;
      height: 14px;
      border-top: 1px solid rgba(255, 255, 255, 0.22);
      border-left: 1px solid rgba(255, 255, 255, 0.22);
      background: rgba(16, 23, 35, 0.93);
      transform: rotate(45deg);
      backdrop-filter: blur(20px) saturate(130%);
    }

    .notes-panel-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 14px 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .notes-panel-title {
      font-size: 0.86rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.86);
    }

    .notes-panel-close.modal-close-mac {
      position: static;
      width: 12px;
      height: 12px;
      margin-left: auto;
      flex-shrink: 0;
      transform: none;
    }

    .notes-panel-close.modal-close-mac:hover {
      transform: scale(1.12);
    }

    .notes-panel-body {
      padding: 12px 14px 14px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      overflow: visible;
    }

    .notes-composer-label {
      font-size: 0.78rem;
      color: rgba(255, 255, 255, 0.68);
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .notes-composer {
      width: 100%;
      min-height: 82px;
      max-height: 140px;
      resize: vertical;
      padding: 10px 11px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      background: rgba(3, 8, 18, 0.48);
      color: rgba(255, 255, 255, 0.92);
      font-size: 0.88rem;
      line-height: 1.32;
      outline: none;
      transition: border-color 0.2s ease, background 0.2s ease;
    }

    .notes-composer:focus {
      border-color: rgba(126, 234, 252, 0.62);
      background: rgba(10, 18, 30, 0.68);
    }

    .notes-actions-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .notes-save-status {
      font-size: 0.74rem;
      color: rgba(255, 255, 255, 0.6);
      font-weight: 600;
      letter-spacing: 0.02em;
      white-space: nowrap;
    }

    .notes-feed {
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: none;
      overflow: visible;
      padding-right: 2px;
      position: relative;
      z-index: 1;
    }

    .notes-feed-empty {
      border: 1px dashed rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      padding: 12px;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.6);
      text-align: center;
      background: rgba(255, 255, 255, 0.03);
    }

    .note-card {
      border-radius: 11px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.05);
      padding: 10px 11px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      position: relative;
      z-index: 1;
    }

    .note-card.note-card-menu-open {
      z-index: 12000;
    }

    .note-card.note-color-yellow {
      border-color: rgba(255, 255, 255, 0.12);
      background:
        linear-gradient(165deg, rgba(255, 239, 176, 0.17) 0%, rgba(255, 225, 138, 0.12) 100%),
        rgba(255, 255, 255, 0.05);
    }

    .note-card.note-color-red {
      border-color: rgba(248, 113, 113, 0.32);
      background:
        linear-gradient(165deg, rgba(248, 113, 113, 0.2) 0%, rgba(239, 68, 68, 0.14) 100%),
        rgba(255, 255, 255, 0.04);
    }

    .note-card.note-color-green {
      border-color: rgba(74, 222, 128, 0.3);
      background:
        linear-gradient(165deg, rgba(74, 222, 128, 0.19) 0%, rgba(34, 197, 94, 0.12) 100%),
        rgba(255, 255, 255, 0.04);
    }

    .note-card.note-color-blue {
      border-color: rgba(96, 165, 250, 0.3);
      background:
        linear-gradient(165deg, rgba(96, 165, 250, 0.19) 0%, rgba(59, 130, 246, 0.12) 100%),
        rgba(255, 255, 255, 0.04);
    }

    .note-card.note-color-gray {
      border-color: rgba(148, 163, 184, 0.28);
      background:
        linear-gradient(165deg, rgba(148, 163, 184, 0.2) 0%, rgba(100, 116, 139, 0.12) 100%),
        rgba(255, 255, 255, 0.04);
    }

    .note-card-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 0.72rem;
      line-height: 1.1;
    }

    .note-card-meta-right {
      display: flex;
      align-items: center;
      gap: 4px;
      position: relative;
      min-width: 0;
      flex-shrink: 0;
    }

    .note-card-author {
      color: rgba(255, 255, 255, 0.88);
      font-weight: 700;
      letter-spacing: 0.02em;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .note-card-time {
      color: rgba(255, 255, 255, 0.64);
      font-weight: 500;
      white-space: nowrap;
    }

    .note-card-menu-btn {
      width: 24px;
      height: 24px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.82);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s ease, border-color 0.2s ease;
      padding: 0;
      flex-shrink: 0;
    }

    .note-card-menu-btn:hover {
      background: rgba(255, 255, 255, 0.16);
      border-color: rgba(255, 255, 255, 0.28);
    }

    .note-card-menu-btn svg {
      width: 14px;
      height: 14px;
      pointer-events: none;
    }

    .note-card-menu {
      position: absolute;
      top: calc(100% + 6px);
      right: 0;
      min-width: 176px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background:
        linear-gradient(160deg, rgba(19, 28, 42, 0.95) 0%, rgba(12, 18, 30, 0.95) 100%),
        rgba(12, 18, 30, 0.95);
      box-shadow: 0 16px 28px rgba(0, 0, 0, 0.4);
      padding: 6px;
      display: flex;
      flex-direction: column;
      gap: 3px;
      z-index: 12001;
    }

    .note-card-menu.note-card-menu-up {
      top: auto;
      bottom: calc(100% + 6px);
    }

    .note-card-menu-item {
      width: 100%;
      border: 1px solid transparent;
      background: rgba(255, 255, 255, 0.04);
      color: rgba(255, 255, 255, 0.88);
      border-radius: 8px;
      padding: 6px 8px;
      font-size: 0.75rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      text-align: left;
      transition: background 0.2s ease, border-color 0.2s ease;
    }

    .note-card-menu-item:hover {
      background: rgba(255, 255, 255, 0.12);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .note-card-menu-item.danger {
      color: #fecaca;
    }

    .note-card-menu-item.danger:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: rgba(239, 68, 68, 0.36);
    }

    .note-card-menu-divider {
      height: 1px;
      background: rgba(255, 255, 255, 0.14);
      margin: 4px 2px;
    }

    .note-card-menu-color-option.active {
      border-color: rgba(125, 211, 252, 0.48);
      background: rgba(59, 130, 246, 0.18);
    }

    .note-color-swatch {
      width: 11px;
      height: 11px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.35);
      flex-shrink: 0;
    }

    .note-color-swatch-yellow {
      background: #facc15;
    }

    .note-color-swatch-red {
      background: #ef4444;
    }

    .note-color-swatch-green {
      background: #22c55e;
    }

    .note-color-swatch-blue {
      background: #3b82f6;
    }

    .note-color-swatch-gray {
      background: #94a3b8;
    }

    .note-card-content {
      color: rgba(255, 255, 255, 0.92);
      font-size: 0.84rem;
      line-height: 1.35;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .notes-templates-block {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .notes-templates-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .notes-templates-title {
      font-size: 0.78rem;
      color: rgba(255, 255, 255, 0.68);
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .notes-template-select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(6, 12, 22, 0.5);
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.84rem;
      padding: 9px 10px;
      outline: none;
    }

    .notes-template-actions {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .notes-template-actions-clean {
      grid-template-columns: minmax(0, 88px) minmax(0, 1fr);
    }

    .notes-templates-modal {
      position: fixed;
      inset: 0;
      z-index: 5600;
    }

    .notes-templates-modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(2, 6, 14, 0.56);
      backdrop-filter: blur(2px);
    }

    .notes-templates-modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: min(760px, calc(100vw - 26px));
      max-height: min(82vh, 720px);
      display: flex;
      flex-direction: column;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background:
        linear-gradient(155deg, rgba(20, 27, 40, 0.93) 0%, rgba(11, 17, 29, 0.95) 100%),
        rgba(10, 16, 28, 0.94);
      backdrop-filter: blur(20px) saturate(125%);
      box-shadow: 0 28px 52px rgba(0, 0, 0, 0.42);
      overflow: hidden;
    }

    .notes-templates-modal-close.modal-close-mac {
      position: absolute;
      top: 12px;
      right: 12px;
    }

    .notes-templates-modal-header {
      padding: 16px 18px 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .notes-templates-modal-header h3 {
      margin: 0;
      font-size: 0.95rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.88);
    }

    .notes-templates-modal-body {
      display: grid;
      grid-template-columns: minmax(220px, 270px) minmax(0, 1fr);
      gap: 14px;
      padding: 14px 16px 16px;
      min-height: 0;
      overflow: auto;
    }

    .notes-templates-manager-list,
    .notes-templates-manager-editor {
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 0;
    }

    .notes-templates-manager-label {
      font-size: 0.76rem;
      color: rgba(255, 255, 255, 0.72);
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .notes-templates-manager-select {
      min-height: 230px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      background: rgba(4, 9, 18, 0.55);
      color: rgba(255, 255, 255, 0.92);
      font-size: 0.85rem;
      padding: 8px;
      outline: none;
    }

    .notes-templates-manager-input,
    .notes-templates-manager-textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      background: rgba(4, 9, 18, 0.55);
      color: rgba(255, 255, 255, 0.92);
      font-size: 0.84rem;
      padding: 9px 10px;
      outline: none;
      transition: border-color 0.2s ease, background 0.2s ease;
    }

    .notes-templates-manager-input:focus,
    .notes-templates-manager-textarea:focus {
      border-color: rgba(126, 234, 252, 0.6);
      background: rgba(8, 14, 24, 0.66);
    }

    .notes-templates-manager-textarea {
      min-height: 210px;
      resize: vertical;
    }

    .notes-templates-manager-actions {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    @media (max-width: 760px) {
      .notes-templates-modal-body {
        grid-template-columns: 1fr;
      }

      .notes-templates-manager-select {
        min-height: 160px;
      }
    }

    .notes-btn {
      border: 1px solid rgba(255, 255, 255, 0.16);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.01em;
      padding: 8px 10px;
      cursor: pointer;
      transition: background 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
    }

    .notes-btn:hover {
      background: rgba(126, 234, 252, 0.16);
      border-color: rgba(126, 234, 252, 0.34);
    }

    .notes-btn:active {
      transform: translateY(1px);
    }

    .notes-btn.primary {
      background: rgba(59, 130, 246, 0.24);
      border-color: rgba(96, 165, 250, 0.45);
      color: rgba(239, 246, 255, 0.96);
    }

    .notes-btn.primary:hover {
      background: rgba(59, 130, 246, 0.34);
      border-color: rgba(125, 211, 252, 0.62);
    }

    .notes-btn.danger {
      background: rgba(239, 68, 68, 0.18);
      border-color: rgba(248, 113, 113, 0.38);
      color: rgba(254, 226, 226, 0.95);
    }

    .notes-btn.danger:hover {
      background: rgba(239, 68, 68, 0.28);
      border-color: rgba(248, 113, 113, 0.56);
    }
    
    /* Botón de copiar para Case ID - solo icono, sin box */
    .copy-icon-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      background: transparent;
      border: none;
      color: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 0;
      margin-left: 4px;
    }
    
    .copy-icon-btn:hover {
      color: white;
      transform: scale(1.1);
    }
    
    .copy-icon-btn svg {
      width: 14px;
      height: 14px;
    }
    
    .copy-icon-btn.copied {
      color: #4ade80;
    }
    
    /* Navegación de pestañas */
    .lead-tabs-nav {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 4px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }
    
    .lead-tab {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: transparent;
      border: none;
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      flex: 1;
      justify-content: center;
      min-width: 100px;
    }
    
    .lead-tab:hover {
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.9);
    }
    
    .lead-tab.active {
      background: rgba(126, 234, 252, 0.15);
      color: var(--accent, #7eeafc);
      box-shadow: 0 2px 8px rgba(126, 234, 252, 0.2);
    }
    
    .lead-tab svg {
      width: 18px;
      height: 18px;
    }
    
    body.home-active.theme-light .lead-tabs-nav {
      background: rgba(0, 0, 0, 0.04);
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .lead-tab {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .lead-tab:hover {
      background: rgba(0, 0, 0, 0.06);
      color: rgba(0, 0, 0, 0.8);
    }
    
    body.home-active.theme-light .lead-tab.active {
      background: rgba(59, 130, 246, 0.15);
      color: #3b82f6;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
    }
    
    /* ============================================
       CALCULATOR SECTION - Glassmorphism Design
       ============================================ */
    
    .calculator-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      padding: 20px 0;
    }
    
    .calculator-inputs,
    .calculator-results {
      background: linear-gradient(135deg, 
        rgba(40, 45, 60, 0.6) 0%, 
        rgba(25, 30, 45, 0.7) 100%
      );
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 24px;
    }
    
    .calculator-section-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: white;
      margin: 0 0 20px 0;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .calc-field {
      margin-bottom: 16px;
    }
    
    .calc-field label {
      display: block;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 6px;
      font-weight: 500;
    }
    
    .calc-input-wrapper {
      position: relative;
    }
    
    .calc-input {
      width: 100%;
      padding: 12px 16px;
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      color: white;
      font-size: 1rem;
      font-family: 'Inter', monospace;
      transition: all 0.2s ease;
      box-sizing: border-box;
    }
    
    .calc-input:focus {
      outline: none;
      border-color: var(--accent, #7eeafc);
      background: rgba(0, 0, 0, 0.3);
      box-shadow: 0 0 0 3px rgba(126, 234, 252, 0.1);
    }
    
    .calc-input.currency {
      padding-left: 32px;
    }
    
    .calc-input.percent {
      padding-right: 32px;
    }
    
    .input-prefix {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
    }
    
    .input-suffix {
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
    }
    
    /* Toggle para Legal Plan */
    .calc-toggle-wrapper {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .calc-toggle-wrapper:hover {
      background: rgba(0, 0, 0, 0.25);
      border-color: rgba(255, 255, 255, 0.15);
    }
    
    .calc-toggle-label {
      font-size: 0.9rem;
      color: white;
    }
    
    .calc-toggle {
      width: 44px;
      height: 24px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      position: relative;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .calc-toggle.active {
      background: rgba(34, 197, 94, 0.5);
      border-color: rgba(34, 197, 94, 0.3);
    }
    
    .calc-toggle-thumb {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 18px;
      height: 18px;
      background: white;
      border-radius: 50%;
      transition: transform 0.3s ease;
    }
    
    .calc-toggle.active .calc-toggle-thumb {
      transform: translateX(20px);
    }
    
    /* Resultados */
    .calc-result-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .calc-result-row:last-child {
      border-bottom: none;
    }
    
    .calc-result-row.highlight {
      background: rgba(126, 234, 252, 0.08);
      margin: 0 -16px;
      padding: 16px;
      border-radius: 12px;
      border: 1px solid rgba(126, 234, 252, 0.15);
    }
    
    .calc-result-row.savings {
      background: rgba(34, 197, 94, 0.08);
      margin: 12px -16px 0;
      padding: 16px;
      border-radius: 12px;
      border: 1px solid rgba(34, 197, 94, 0.15);
    }
    
    .calc-result-label {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
    }
    
    .calc-result-value {
      font-family: 'Inter', monospace;
      font-size: 1rem;
      font-weight: 600;
      color: white;
    }
    
    .calc-result-row.savings .calc-result-value {
      color: #4ade80;
    }
    
    .calc-result-row.highlight .calc-result-value {
      color: var(--accent, #7eeafc);
      font-size: 1.2rem;
    }
    
    /* Tabla de Payment Schedule */
    .payment-schedule-section {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, 
        rgba(40, 45, 60, 0.6) 0%, 
        rgba(25, 30, 45, 0.7) 100%
      );
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 24px;
      margin-top: 8px;
    }
    
    .schedule-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .schedule-table-container {
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
    
    .schedule-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    
    .schedule-table th {
      background: rgba(0, 0, 0, 0.25);
      padding: 14px 16px;
      text-align: left;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .schedule-table td {
      padding: 12px 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      color: white;
    }
    
    .schedule-table tr:hover td {
      background: rgba(255, 255, 255, 0.03);
    }
    
    .schedule-table .mono {
      font-family: 'Inter', monospace;
    }
    
    .schedule-table .savings {
      color: #4ade80;
      font-weight: 600;
    }
    
    /* Responsive Calculator */
    @media (max-width: 1100px) {
      .calculator-container {
        grid-template-columns: 1fr;
      }
      
      .payment-schedule-section {
        grid-column: 1;
      }
    }
    
    /* Light mode calculator */
    body.home-active.theme-light .calculator-inputs,
    body.home-active.theme-light .calculator-results,
    body.home-active.theme-light .payment-schedule-section {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.7) 0%, 
        rgba(245, 245, 250, 0.8) 100%
      );
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .calculator-section-title {
      color: #1a1a1a;
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .calc-field label {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .calc-input {
      background: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.1);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .calc-input:focus {
      border-color: #3b82f6;
      background: rgba(255, 255, 255, 0.8);
    }
    
    body.home-active.theme-light .input-prefix,
    body.home-active.theme-light .input-suffix {
      color: rgba(0, 0, 0, 0.4);
    }
    
    body.home-active.theme-light .calc-toggle-wrapper {
      background: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .calc-toggle-label {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .calc-result-label {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .calc-result-value {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .schedule-table th {
      background: rgba(0, 0, 0, 0.08);
      color: rgba(0, 0, 0, 0.6);
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .schedule-table td {
      color: #1a1a1a;
      border-bottom-color: rgba(0, 0, 0, 0.08);
    }
    
    /* ============================================
       CALCULATOR REDESIGN - Glass Box Style
       ============================================ */
    
    .calculator-main-card {
      background: linear-gradient(135deg, 
        rgba(35, 40, 55, 0.8) 0%, 
        rgba(25, 30, 45, 0.9) 100%
      ) !important;
    }

    .calc-months-payment-card {
      margin-top: -4px;
      background: linear-gradient(135deg, 
        rgba(35, 40, 55, 0.8) 0%, 
        rgba(25, 30, 45, 0.9) 100%
      ) !important;
    }

    /* Program Duration + Monthly Payment - Integrado en la card */
    .calc-duration-payment-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 24px;
      padding: 16px 0 0 0;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 16px;
    }
    
    .calc-duration-compact {
      display: flex;
      flex-direction: column;
      gap: 8px;
      flex: 1;
    }
    
    .calc-duration-wheel-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .calc-duration-label-compact {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
      white-space: nowrap;
    }
    
    .calc-months-payment-card .calc-months-section {
      margin-top: 0;
      padding-top: 0;
      border-top: none;
    }
    
    .calculator-main-card h3 {
      display: flex;
      align-items: center;
      font-size: 1.1rem;
      margin-bottom: 20px;
    }
    
    .calc-layout {
      gap: 40px;
    }
    
    .calc-column-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.6);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin: 0 0 16px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* Inputs de calculadora - Totalmente libres/invisibles */
    .calc-input-row {
      min-height: 32px;
    }
    
    .calc-input-minimal {
      display: flex;
      align-items: center;
      gap: 4px;
      min-width: 100px;
      justify-content: flex-end;
    }
    
    .calc-input-minimal.protected {
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .calc-input-minimal.protected:hover {
      opacity: 0.8;
    }
    
    .calc-input-minimal.protected.editing {
      opacity: 1;
    }
    
    /* Click para copiar - Total Debt */
    .calc-input-minimal.copy-on-click {
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 2px 6px;
      border-radius: 4px;
    }
    
    .calc-input-minimal.copy-on-click:hover {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .calc-input-minimal.copy-on-click.copied {
      background: rgba(34, 197, 94, 0.15);
    }
    
    .calc-input-field {
      background: transparent;
      border: none;
      color: white;
      font-family: 'Inter', monospace;
      font-size: 0.95rem;
      width: auto;
      min-width: 40px;
      text-align: right;
      padding: 0;
      outline: none;
      transition: all 0.2s ease;
    }
    
    .calc-input-field:focus {
      border-bottom: 1px solid var(--accent, #7eeafc);
      padding-bottom: 2px;
    }
    
    .calc-input-field.percent {
      width: 30px;
      min-width: 30px;
    }
    
    .calc-input-field:read-only {
      cursor: pointer;
    }
    
    .calc-input-field:read-only:focus {
      border-bottom: 1px dashed rgba(255, 255, 255, 0.3);
    }

    #calcTotalDebt {
      pointer-events: none;
      user-select: none;
    }
    
    .calc-input-prefix,
    .calc-input-suffix {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
      font-family: 'Inter', monospace;
    }
    
    /* Botón de candado toggle */
    .lock-toggle-btn {
      background: transparent;
      border: none;
      color: rgba(255, 255, 255, 0.3);
      cursor: pointer;
      padding: 4px;
      margin-right: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      transition: all 0.2s ease;
    }
    
    .lock-toggle-btn:hover {
      color: rgba(255, 255, 255, 0.7);
      background: rgba(255, 255, 255, 0.05);
    }
    
    .lock-toggle-btn.unlocked {
      color: var(--accent, #7eeafc);
    }
    
    .lock-toggle-btn.unlocked:hover {
      color: #22c55e;
      background: rgba(34, 197, 94, 0.1);
    }
    
    .lock-icon-svg {
      display: block;
    }
    
    .lock-icon-svg.hidden {
      display: none;
    }
    
    /* Monthly Payment - Minimalista sin fondo/borde */
    .calc-monthly-payment-minimal {
      min-width: clamp(150px, 22vw, 220px);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .monthly-payment-content {
      text-align: center;
      cursor: pointer;
      padding: 12px 20px;
      border-radius: 12px;
      transition: all 0.2s ease;
    }
    
    .monthly-payment-content:hover {
      background: rgba(126, 234, 252, 0.08);
    }
    
    .monthly-payment-content.copied {
      background: rgba(34, 197, 94, 0.15);
    }
    
    .monthly-payment-label-minimal {
      display: block;
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 4px;
    }
    
    .monthly-payment-value-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .monthly-payment-amount-minimal {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--accent, #7eeafc);
      font-family: 'Inter', monospace;
    }
    
    .copy-icon-small {
      color: rgba(255, 255, 255, 0.4);
      transition: all 0.2s ease;
    }
    
    .monthly-payment-content:hover .copy-icon-small {
      color: var(--accent, #7eeafc);
    }
    
    /* Toggle inline */
    .calc-toggle-wrapper-inline {
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
    }
    
    .calc-toggle-label-small {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.7);
    }

    .calc-legal-state-hint {
      font-size: 0.78rem;
      color: rgba(255, 255, 255, 0.72);
      white-space: nowrap;
      max-width: 260px;
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: right;
    }

    .calc-legal-state-word {
      font-weight: 700;
      margin-left: 2px;
    }

    .calc-legal-state-word.red {
      color: #ef4444;
    }

    .calc-legal-state-word.green {
      color: #22c55e;
    }
    
    .calc-payment-day-row {
      position: relative;
    }
    
    .calc-payment-day-wrapper {
      display: flex;
      justify-content: flex-end;
      position: relative;
    }
    
    .calc-payment-day-trigger {
      min-width: clamp(150px, 24vw, 220px);
      justify-content: space-between;
      gap: 8px;
      padding: 7px 12px;
      font-size: 0.82rem;
    }
    
    .calc-payment-day-display {
      font-weight: 500;
    }
    
    .calc-payment-day-calendar {
      right: 0;
      bottom: calc(100% + 6px);
      left: auto;
    }
    
    /* Resultados column */
    .calc-results-column .info-row-value {
      font-weight: 500;
    }
    
    .highlight-row {
      background: rgba(126, 234, 252, 0.1);
      margin: 8px -8px;
      padding: 12px 8px !important;
      border-radius: 8px;
      border: 1px solid rgba(126, 234, 252, 0.2);
    }
    
    .highlight-row .info-row-value {
      color: var(--accent, #7eeafc) !important;
      font-size: 1.1rem;
      font-weight: 600;
    }
    
    .savings-row .info-row-value {
      color: #4ade80 !important;
      font-weight: 600;
    }
    
    /* Sección de Meses y Monthly Payment - Minimalista */
    .calc-months-section {
      display: flex;
      align-items: stretch;
      gap: 24px;
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .calc-months-control {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .calc-months-label {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }
    
    /* Wheel Picker Inline - Integrado en el layout */
    .months-inline-wheel-wrapper {
      display: flex;
      align-items: stretch;
      justify-content: center;
      width: 100%;
      height: 86px;
      position: relative;
    }
    
    .months-inline-wheel {
      position: relative;
      width: min(100%, 360px);
      max-width: 100%;
      height: 100%;
      overflow: hidden;
      cursor: ew-resize;
      touch-action: none;
      user-select: none;
      perspective: 900px;
      border-radius: 12px;
      mask-image: linear-gradient(
        to right,
        transparent 0%,
        black 14%,
        black 86%,
        transparent 100%
      );
      -webkit-mask-image: linear-gradient(
        to right,
        transparent 0%,
        black 14%,
        black 86%,
        transparent 100%
      );
    }
    
    .months-inline-wheel:focus-visible {
      outline: none;
      box-shadow: 0 0 0 2px rgba(126, 234, 252, 0.35);
    }
    
    .months-inline-wheel.dragging {
      cursor: grabbing;
    }
    
    .months-inline-wheel::before,
    .months-inline-wheel::after {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      width: 48px;
      pointer-events: none;
      z-index: 3;
    }
    
    .months-inline-wheel::before {
      left: 0;
      background: linear-gradient(90deg, rgba(20, 25, 35, 0.55) 0%, rgba(20, 25, 35, 0) 100%);
    }
    
    .months-inline-wheel::after {
      right: 0;
      background: linear-gradient(270deg, rgba(20, 25, 35, 0.55) 0%, rgba(20, 25, 35, 0) 100%);
    }
    
    .months-wheel-track-inline {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      display: flex;
      align-items: center;
      transform: translateX(0);
      will-change: transform;
      transition: transform 0.18s cubic-bezier(0.22, 0.75, 0.28, 1);
    }
    
    .months-wheel-item-inline {
      width: 58px;
      height: 100%;
      flex: 0 0 58px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      line-height: 1;
      color: rgba(255, 255, 255, 0.24);
      font-weight: 600;
      transition: transform 0.14s linear, color 0.14s ease, opacity 0.14s ease, filter 0.14s ease;
      user-select: none;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      pointer-events: auto;
    }
    
    .months-wheel-item-inline.active {
      font-weight: 700;
      color: white;
      text-shadow: 0 0 14px rgba(126, 234, 252, 0.25);
    }
    
    .months-wheel-item-inline.near {
      color: rgba(255, 255, 255, 0.65);
    }
    
    .months-wheel-indicator-inline {
      display: none;
      z-index: 2;
    }
    
    .months-unit-inline {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.4);
      font-weight: 500;
      margin-left: 4px;
    }
    
    /* Botones rápidos debajo de la ruleta */
    .months-quick-buttons.minimal.under-wheel {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 4px;
      padding-left: 0;
    }
    
    /* Badge del plan en Payment Schedule header */
    .plan-duration-badge {
      font-size: 0.85rem;
      color: var(--accent, #7eeafc);
      font-weight: 600;
      padding: 4px 12px;
      background: rgba(126, 234, 252, 0.1);
      border-radius: 20px;
      border: 1px solid rgba(126, 234, 252, 0.2);
    }
    
    /* Botones rápidos - sin cajas */
    .months-quick-buttons {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .months-quick-buttons.minimal {
      gap: 4px;
    }
    
    .months-quick-btn.minimal {
      padding: 6px 12px;
      background: transparent;
      border: none;
      border-radius: 6px;
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
    }
    
    .months-quick-btn.minimal:hover {
      color: rgba(255, 255, 255, 0.8);
      background: rgba(255, 255, 255, 0.05);
    }
    
    .months-quick-btn.minimal.active {
      color: var(--accent, #7eeafc);
      background: rgba(126, 234, 252, 0.1);
      font-weight: 600;
    }
    
    /* Wheel Picker Interactivo Directo */
    .months-wheel-container {
      position: relative;
      display: inline-block;
    }
    
    .months-wheel-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 140px;
      height: 220px;
      background: linear-gradient(180deg, 
        rgba(30, 35, 50, 0.98) 0%, 
        rgba(20, 25, 35, 0.99) 100%
      );
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
      z-index: 100;
      overflow: hidden;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
      pointer-events: none;
    }
    
    .months-wheel-overlay.active {
      opacity: 1;
      visibility: visible;
      pointer-events: all;
    }
    
    .months-wheel-track {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      transition: transform 0.1s ease-out;
    }
    
    .months-wheel-item {
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      color: rgba(255, 255, 255, 0.35);
      font-weight: 500;
      transition: all 0.15s ease;
      user-select: none;
      cursor: grab;
    }
    
    .months-wheel-item.active {
      color: var(--accent, #7eeafc);
      font-size: 1.6rem;
      font-weight: 700;
      text-shadow: 0 0 20px rgba(126, 234, 252, 0.4);
    }
    
    .months-wheel-item.near {
      color: rgba(255, 255, 255, 0.6);
      font-size: 1.2rem;
    }
    
    .months-wheel-center-indicator {
      position: absolute;
      top: 50%;
      left: 10px;
      right: 10px;
      height: 44px;
      transform: translateY(-50%);
      border-top: 1px solid rgba(126, 234, 252, 0.3);
      border-bottom: 1px solid rgba(126, 234, 252, 0.3);
      background: rgba(126, 234, 252, 0.05);
      border-radius: 8px;
      pointer-events: none;
    }
    
    /* Hover effect en el valor para indicar interactividad */
    .months-value {
      cursor: grab;
      transition: all 0.2s ease;
      display: inline-block;
      padding: 4px 12px;
      border-radius: 8px;
    }
    
    .months-value:hover {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .months-value:active {
      cursor: grabbing;
    }
    
    /* Monthly Payment Box */
    .calc-monthly-payment-box {
      min-width: clamp(190px, 24vw, 280px);
      background: linear-gradient(135deg, 
        rgba(126, 234, 252, 0.15) 0%, 
        rgba(126, 234, 252, 0.05) 100%
      );
      border: 2px solid rgba(126, 234, 252, 0.3);
      border-radius: 16px;
      padding: 20px 24px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
    }
    
    .monthly-payment-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .monthly-payment-label {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.6);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .copy-monthly-btn {
      width: 28px;
      height: 28px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 6px;
      color: var(--accent, #7eeafc);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    
    .copy-monthly-btn:hover {
      background: rgba(126, 234, 252, 0.2);
      transform: scale(1.1);
    }
    
    .monthly-payment-amount {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent, #7eeafc);
      font-family: 'Inter', monospace;
      line-height: 1.2;
    }
    
    .monthly-payment-note {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.4);
      margin-top: 4px;
    }
    
    /* Payment Schedule Card - Solo visible en Calculator */
    .payment-schedule-card {
      margin-top: 16px;
      display: none;
    }
    
    #calculatorSection:not(.hidden) .payment-schedule-card {
      display: block;
    }
    
    /* Responsive Calculator */
    @media (max-width: 900px) {
      .calc-duration-payment-wrapper {
        flex-direction: column;
        gap: 24px;
      }
      
      .calc-months-section {
        flex-direction: column;
      }
      
      .calc-monthly-payment-box {
        min-width: auto;
        width: 100%;
      }
      
      .months-number {
        font-size: 2rem;
      }
    }
    
    /* Light mode calculator */
    body.home-active.theme-light .calculator-main-card {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.8) 0%, 
        rgba(245, 245, 250, 0.9) 100%
      ) !important;
    }

    body.home-active.theme-light .calc-duration-payment-row {
      border-top-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .calc-duration-label-compact {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .plan-duration-badge {
      color: #3b82f6;
      background: rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.2);
    }
    
    body.home-active.theme-light .calc-column-title {
      color: rgba(0, 0, 0, 0.5);
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .calc-input-minimal.protected:hover {
      opacity: 0.8;
    }
    
    body.home-active.theme-light .calc-input-field {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .calc-input-field:focus {
      border-bottom-color: #3b82f6;
    }
    
    body.home-active.theme-light .calc-input-prefix,
    body.home-active.theme-light .calc-input-suffix {
      color: rgba(0, 0, 0, 0.4);
    }

    body.home-active.theme-light .calc-legal-state-hint {
      color: rgba(0, 0, 0, 0.6);
    }
    
    body.home-active.theme-light .lock-toggle-btn {
      color: rgba(0, 0, 0, 0.3);
    }
    
    body.home-active.theme-light .lock-toggle-btn:hover {
      color: rgba(0, 0, 0, 0.6);
      background: rgba(0, 0, 0, 0.05);
    }
    
    body.home-active.theme-light .lock-toggle-btn.unlocked {
      color: #3b82f6;
    }
    
    body.home-active.theme-light .lock-toggle-btn.unlocked:hover {
      color: #22c55e;
      background: rgba(34, 197, 94, 0.1);
    }
    
    body.home-active.theme-light .months-btn {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.1);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .months-btn:hover {
      background: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .months-number {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .months-quick-btn.minimal {
      color: rgba(0, 0, 0, 0.4);
      background: transparent;
    }
    
    body.home-active.theme-light .months-quick-btn.minimal:hover {
      color: rgba(0, 0, 0, 0.7);
      background: rgba(0, 0, 0, 0.05);
    }
    
    body.home-active.theme-light .months-quick-btn.minimal.active {
      color: #3b82f6;
      background: rgba(59, 130, 246, 0.1);
    }
    
    /* Light mode wheel picker */
    body.home-active.theme-light .months-wheel-item-inline {
      color: rgba(0, 0, 0, 0.25);
    }
    
    body.home-active.theme-light .months-wheel-item-inline.near {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .months-wheel-item-inline.active {
      color: #3b82f6;
      text-shadow: 0 0 12px rgba(59, 130, 246, 0.2);
    }
    
    body.home-active.theme-light .months-wheel-indicator-inline {
      display: none;
    }
    
    body.home-active.theme-light .months-inline-wheel::before {
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0) 100%);
    }
    
    body.home-active.theme-light .months-inline-wheel::after {
      background: linear-gradient(270deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0) 100%);
    }
    
    body.home-active.theme-light .months-unit-inline {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .plan-duration-badge {
      color: #3b82f6;
      background: rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.2);
    }

    body.home-active.theme-light .monthly-payment-content:hover {
      background: rgba(59, 130, 246, 0.08);
    }
    
    body.home-active.theme-light .monthly-payment-content.copied {
      background: rgba(34, 197, 94, 0.15);
    }
    
    body.home-active.theme-light .monthly-payment-amount-minimal {
      color: #3b82f6;
    }
    
    body.home-active.theme-light .monthly-payment-label-minimal {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .copy-icon-small {
      color: rgba(0, 0, 0, 0.3);
    }
    
    body.home-active.theme-light .monthly-payment-content:hover .copy-icon-small {
      color: #3b82f6;
    }
    
    
    /* Barra de herramientas del lead */
    .lead-toolbar {
      display: flex;
      align-items: center;
      gap: 8px;
      padding-top: 12px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 6px;
      flex-wrap: wrap;
    }
    
    .toolbar-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 8px;
      color: white;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
    }
    
    .toolbar-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-1px);
    }
    
    .toolbar-btn svg {
      width: 18px;
      height: 18px;
    }
    
    .toolbar-btn.back-btn {
      margin-right: auto;
    }
    
    /* Grid de contenido - Responsivo y Compacto */
    /* Global hidden class - must override other display properties */
    .hidden {
      display: none !important;
    }
    
    .lead-content-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      align-content: start;
    }
    
    @media (max-width: 1200px) {
      .lead-content-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .calc-months-section {
        flex-wrap: wrap;
        gap: 16px;
      }

      .calc-monthly-payment-minimal,
      .calc-monthly-payment-box {
        width: 100%;
      }
    }
    
    @media (max-width: 900px) {
      .lead-view-wrapper {
        height: auto;
        min-height: var(--lead-viewport-height);
      }

      .lead-content-grid {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      
      .lead-floating {
        grid-template-columns: auto minmax(0, 1fr) auto;
      }
      
      .lead-logo {
        display: block;
        width: clamp(56px, 12vw, 76px);
      }
      
      .lead-floating .toolbar-wrap {
        grid-column: 2;
      }
      
      .lead-floating .home-actions {
        grid-column: 3;
      }
      
      .lead-content-area {
        padding: 8px 16px;
      }

      .calc-payment-day-wrapper {
        width: 100%;
        justify-content: flex-start;
      }

      .calc-payment-day-trigger {
        width: 100%;
        min-width: 0;
      }
    }
    
    @media (max-width: 600px) {
      .lead-title-section {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .lead-name-text {
        font-size: 1.3rem;
        padding: 2px 8px;
      }
      
      .lead-case-id {
        margin-left: 8px;
      }
      
      .toolbar-btn span {
        display: none;
      }
      
      .toolbar-btn {
        padding: 8px;
      }
      
      .custom-calendar {
        width: min(260px, calc(100vw - 24px));
        left: 50% !important;
        transform: translateX(-50%);
      }

      .info-row {
        flex-wrap: wrap;
        align-items: flex-start;
        gap: 6px;
      }

      .info-row-value,
      .info-row-value.editable {
        width: 100%;
        max-width: 100%;
        text-align: left;
        justify-content: flex-start;
      }

      .calc-input-minimal {
        min-width: 0;
      }

      .calc-months-section {
        gap: 12px;
        margin-top: 16px;
        padding-top: 16px;
      }

      .calc-monthly-payment-minimal,
      .calc-monthly-payment-box {
        min-width: 0;
      }
      
      .include-toggle-wrapper {
        margin-left: 8px;
        padding-left: 8px;
        gap: 6px;
      }
      
      .include-toggle-status {
        font-size: 0.65rem;
        min-width: 24px;
      }
      
      .include-toggle {
        width: 32px;
        height: 16px;
      }
      
      .include-toggle-thumb {
        width: 12px;
        height: 12px;
      }
      
      .include-toggle input:checked + .include-toggle-track .include-toggle-thumb {
        transform: translateX(16px);
      }
    }
    
    .lead-info-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 16px 20px;
      min-width: 0;
    }
    
    .lead-info-card h3 {
      margin: 0 0 12px 0;
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 1px;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .lead-info-card-wide {
      grid-column: 1 / -1;
    }
    
    .two-column-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: clamp(14px, 2vw, 24px);
      align-items: start;
    }
    
    .info-column {
      min-width: 0;
    }
    
    @media (max-width: 900px) {
      .two-column-layout {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }
    
    /* Input de fecha para Callback - Liquid Glass */
    .callback-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .date-input {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 6px 12px;
      color: white;
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      cursor: pointer;
      outline: none;
      transition: all 0.2s ease;
    }
    
    .date-input:hover, .date-input:focus {
      border-color: rgba(255, 255, 255, 0.4);
      background: rgba(255, 255, 255, 0.12);
    }
    
    /* Liquid Glass Input */
    .liquid-glass-input {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.15) 0%, 
        rgba(255, 255, 255, 0.05) 100%
      );
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.25);
      box-shadow: 
        0 4px 24px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }
    
    .liquid-glass-input:hover {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.2) 0%, 
        rgba(255, 255, 255, 0.08) 100%
      );
      border-color: rgba(255, 255, 255, 0.35);
      box-shadow: 
        0 6px 32px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.25);
    }
    
    .liquid-glass-input:focus {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.25) 0%, 
        rgba(255, 255, 255, 0.1) 100%
      );
      border-color: var(--accent, #7eeafc);
      box-shadow: 
        0 0 20px rgba(126, 234, 252, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }
    
    /* Liquid Glass Button */
    .liquid-glass-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 8px 16px;
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.15) 0%, 
        rgba(255, 255, 255, 0.05) 100%
      );
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 10px;
      color: white;
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 
        0 4px 24px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      white-space: nowrap;
    }
    
    .liquid-glass-btn:hover {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.25) 0%, 
        rgba(255, 255, 255, 0.1) 100%
      );
      border-color: rgba(255, 255, 255, 0.4);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
    }
    
    .liquid-glass-btn svg {
      width: 18px;
      height: 18px;
      opacity: 0.7;
    }
    
    /* Body setup - Sin scroll */
    body {
      margin: 0;
      padding: 0;
      min-height: var(--lead-viewport-height);
      width: 100%;
      overflow-x: hidden;
      overflow-y: hidden;
      position: relative;
    }
    
    /* Callback Row - Contenedor relativo */
    .callback-row {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    /* Callback Wrapper */
    .callback-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
    }
    
    /* Custom Calendar - Liquid Glass Dropdown */
    .custom-calendar {
      position: absolute;
      bottom: calc(100% + 4px);
      right: 0;
      width: 260px;
      max-width: min(260px, calc(100vw - 32px));
      background: linear-gradient(135deg, 
        rgba(40, 40, 55, 0.98) 0%, 
        rgba(25, 25, 35, 0.99) 100%
      );
      backdrop-filter: blur(40px);
      -webkit-backdrop-filter: blur(40px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 12px;
      box-shadow: 
        0 -12px 40px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      z-index: 1000;
      animation: calendarAppear 0.2s ease;
      min-height: 322px;
    }
    
    @keyframes calendarAppear {
      from {
        opacity: 0;
        transform: translateY(-4px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .custom-calendar.hidden {
      display: none;
    }
    
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .calendar-title {
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
      text-transform: capitalize;
    }
    
    .calendar-nav {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 6px;
      color: white;
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 0;
    }
    
    .calendar-nav:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.25);
    }
    
    .calendar-nav svg {
      width: 14px;
      height: 14px;
    }
    
    .calendar-weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
      margin-bottom: 4px;
    }
    
    .calendar-weekdays span {
      text-align: center;
      font-size: 0.65rem;
      color: rgba(255, 255, 255, 0.4);
      font-weight: 500;
      padding: 4px 0;
    }
    
    .calendar-days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-template-rows: repeat(6, 32px);
      gap: 2px;
      min-height: calc((32px * 6) + (2px * 5));
    }
    
    .calendar-day {
      width: 100%;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      border: 1px solid transparent;
      border-radius: 6px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      padding: 0;
    }
    
    .calendar-day:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    .calendar-day.other-month {
      color: rgba(255, 255, 255, 0.3);
    }
    
    .calendar-day.today {
      background: rgba(126, 234, 252, 0.15);
      border-color: rgba(126, 234, 252, 0.3);
      color: var(--accent, #7eeafc);
      font-weight: 600;
    }
    
    .calendar-day.selected {
      background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.3) 0%, 
        rgba(34, 197, 94, 0.15) 100%
      );
      border-color: rgba(34, 197, 94, 0.5);
      color: #4ade80;
      font-weight: 600;
    }
    
    .calendar-day.selected::after {
      content: '';
      position: absolute;
      bottom: 4px;
      width: 4px;
      height: 4px;
      background: #4ade80;
      border-radius: 50%;
      box-shadow: 0 0 8px #4ade80;
    }
    
    .calendar-day.has-pin::before {
      content: '';
      position: absolute;
      top: 2px;
      right: 2px;
      width: 8px;
      height: 8px;
      background: linear-gradient(135deg, #4ade80, #22c55e);
      border-radius: 50%;
      box-shadow: 0 0 6px rgba(34, 197, 94, 0.6);
      animation: pinPulse 2s infinite;
    }
    
    @keyframes pinPulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); opacity: 0.8; }
    }
    
    /* Días deshabilitados en calendario */
    .calendar-day.disabled {
      opacity: 0.35;
      cursor: not-allowed;
      text-decoration: line-through;
      color: rgba(255, 255, 255, 0.4);
    }
    
    body.home-active.theme-light .calendar-day.disabled {
      opacity: 0.35;
      color: rgba(0, 0, 0, 0.4);
      text-decoration: line-through;
    }

    .calendar-jump-popover {
      position: absolute;
      top: 52px;
      left: 12px;
      right: 12px;
      z-index: 4;
      background: rgba(15, 20, 30, 0.96);
      border: 1px solid rgba(255, 255, 255, 0.18);
      border-radius: 9px;
      padding: 8px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
    }

    .calendar-jump-popover.hidden {
      display: none;
    }

    .calendar-jump-popover-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .calendar-jump-input {
      flex: 1;
      height: 30px;
      border-radius: 7px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.95);
      font-size: 0.78rem;
      padding: 0 9px;
      outline: none;
    }

    .calendar-jump-input:focus {
      border-color: rgba(126, 234, 252, 0.55);
      box-shadow: 0 0 0 2px rgba(126, 234, 252, 0.16);
    }

    .calendar-jump-apply {
      height: 30px;
      min-width: 40px;
      border-radius: 7px;
      border: 1px solid rgba(126, 234, 252, 0.45);
      background: rgba(126, 234, 252, 0.12);
      color: rgba(220, 248, 255, 0.95);
      font-size: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      padding: 0 10px;
    }

    .calendar-jump-apply:hover {
      background: rgba(126, 234, 252, 0.2);
    }

    .calendar-jump-error {
      margin-top: 6px;
      min-height: 14px;
      font-size: 0.68rem;
      color: rgba(251, 146, 60, 0.95);
    }
    
    /* Callback Button - Estilo Mac simple (Verde) */
    .callback-mac-btn {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #22c55e;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
      padding: 0;
      margin: 0;
      display: block;
      flex-shrink: 0;
    }
    
    .callback-mac-btn:hover {
      background: #16a34a;
      transform: scale(1.15);
    }
    
    .callback-mac-btn:active {
      transform: scale(0.9);
    }
    
    .callback-mac-btn.hidden {
      display: none;
    }
    
    /* FICO Score */
    .fico-score {
      font-weight: 600;
      color: var(--accent, #7eeafc);
    }
    
    .fico-score.pendiente {
      color: rgba(255, 255, 255, 0.4);
    }
    
    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      gap: 12px;
    }
    
    .info-row:last-child {
      border-bottom: none;
    }
    
    .info-row-label {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.8rem;
      flex-shrink: 0;
    }
    
    .info-row-value {
      color: white;
      font-weight: 500;
      font-size: 0.85rem;
      text-align: right;
      word-break: break-word;
    }
    
    .info-row-value.mono {
      font-family: 'Inter', monospace;
    }
    
    /* Editable fields */
    .info-row-value.editable {
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid transparent;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      max-width: 200px;
    }
    
    .info-row-value.editable:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    .info-row-value.editable:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.12);
      border-color: var(--accent, #7eeafc);
    }
    
    .info-row-value.editable input {
      background: transparent;
      border: none;
      color: inherit;
      font: inherit;
      width: 100%;
      text-align: right;
      outline: none;
    }

    .lead-best-time-select-wrap {
      display: flex;
      justify-content: flex-end;
      min-width: 170px;
    }

    .lead-best-time-select {
      min-width: 170px;
      max-width: 220px;
      padding: 5px 10px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(255, 255, 255, 0.07);
      color: rgba(255, 255, 255, 0.92);
      font-size: 0.82rem;
      font-weight: 500;
      text-align: left;
      outline: none;
      transition: border-color 0.2s ease, background 0.2s ease;
    }

    .lead-best-time-select:focus {
      border-color: var(--accent, #7eeafc);
      background: rgba(255, 255, 255, 0.12);
    }
    
    /* Copy icon */
    .copy-icon {
      width: 14px;
      height: 14px;
      opacity: 0;
      transition: opacity 0.2s ease;
      cursor: pointer;
      color: rgba(255, 255, 255, 0.6);
      flex-shrink: 0;
    }
    
    .info-row-value.editable:hover .copy-icon {
      opacity: 1;
    }
    
    .copy-icon:hover {
      color: var(--accent, #7eeafc);
    }
    
    /* Self Employed Toggle */
    .self-employed-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }
    
    .self-employed-toggle input {
      display: none;
    }
    
    .self-employed-switch {
      width: 40px;
      height: 22px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 11px;
      position: relative;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .self-employed-thumb {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 16px;
      height: 16px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 50%;
      transition: transform 0.3s ease;
    }
    
    .self-employed-toggle input:checked + .self-employed-switch {
      background: rgba(34, 197, 94, 0.5);
      border-color: rgba(34, 197, 94, 0.3);
    }
    
    .self-employed-toggle input:checked + .self-employed-switch .self-employed-thumb {
      transform: translateX(18px);
      background: #22c55e;
    }
    
    .self-employed-label {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.6);
      transition: color 0.3s ease;
    }
    
    .self-employed-toggle input:checked ~ .self-employed-label {
      color: #22c55e;
    }
    
    /* DOB Calendar trigger */
    .dob-calendar-trigger {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid transparent;
      transition: all 0.2s ease;
    }
    
    .dob-calendar-trigger:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    .dob-calendar-trigger svg {
      width: 14px;
      height: 14px;
      opacity: 0.6;
    }
    
    /* Calendar for DOB */
    .dob-calendar-wrapper {
      position: relative;
    }
    
    .dob-calendar {
      position: absolute;
      right: 0;
      width: 260px;
      max-width: min(260px, calc(100vw - 32px));
      z-index: 1001;
    }
    
    body.home-active.theme-light .info-row-value.editable:hover {
      background: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.15);
    }
    
    body.home-active.theme-light .info-row-value.editable:focus {
      background: rgba(255, 255, 255, 0.8);
      border-color: #3b82f6;
    }
    
    body.home-active.theme-light .copy-icon {
      color: rgba(0, 0, 0, 0.4);
    }
    
    body.home-active.theme-light .copy-icon:hover {
      color: #3b82f6;
    }
    
    body.home-active.theme-light .self-employed-switch {
      background: rgba(0, 0, 0, 0.1);
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .self-employed-label {
      color: rgba(0, 0, 0, 0.5);
    }
    
    .loading {
      text-align: center;
      padding: 60px 20px;
      color: rgba(255, 255, 255, 0.6);
      grid-column: 1 / -1;
    }
    
    .loading svg {
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
      margin-bottom: 16px;
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .error {
      text-align: center;
      padding: 60px 20px;
      color: #f87171;
      grid-column: 1 / -1;
    }
    
    /* Tema claro */
    body.home-active.theme-light .lead-name-text {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .lead-name-text:hover {
      border-color: rgba(0, 0, 0, 0.15);
      background: rgba(0, 0, 0, 0.03);
    }
    
    body.home-active.theme-light .lead-name-text:focus {
      background: rgba(255, 255, 255, 0.8);
    }
    
    body.home-active.theme-light .lead-case-id {
      color: rgba(0, 0, 0, 0.6);
    }
    
    body.home-active.theme-light .lead-case-id .case-number {
      color: rgba(0, 0, 0, 0.8);
    }
    
    body.home-active.theme-light .action-icon-btn {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.1);
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .action-icon-btn:hover {
      background: rgba(0, 0, 0, 0.1);
      border-color: rgba(0, 0, 0, 0.15);
      color: #1a1a1a;
    }

    body.home-active.theme-light .lead-assignee-label {
      color: rgba(15, 23, 42, 0.62);
    }

    body.home-active.theme-light .lead-assignee-input {
      background: transparent;
      border-color: rgba(15, 23, 42, 0.2);
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .lead-assignee-input:focus {
      border-color: rgba(37, 99, 235, 0.55);
    }

    body.home-active.theme-light .lead-assignee-confirm {
      color: #166534;
    }

    body.home-active.theme-light .lead-assignee-toggle {
      color: rgba(15, 23, 42, 0.58);
    }

    body.home-active.theme-light .lead-assignee-toggle:hover {
      color: rgba(37, 99, 235, 0.85);
    }

    body.home-active.theme-light .lead-assignee-suggestions {
      border-color: rgba(15, 23, 42, 0.16);
      background: rgba(255, 255, 255, 0.98);
      box-shadow: 0 14px 28px rgba(15, 23, 42, 0.18);
    }

    body.home-active.theme-light .lead-assignee-option {
      color: rgba(15, 23, 42, 0.82);
    }

    body.home-active.theme-light .lead-assignee-option:hover,
    body.home-active.theme-light .lead-assignee-option.active {
      background: rgba(37, 99, 235, 0.11);
      color: #1d4ed8;
    }

    body.home-active.theme-light .lead-assignee-empty {
      color: rgba(15, 23, 42, 0.58);
    }

    body.home-active.theme-light .notes-panel {
      border-color: rgba(15, 23, 42, 0.16);
      background:
        linear-gradient(155deg, rgba(255, 255, 255, 0.96) 0%, rgba(247, 251, 255, 0.94) 100%),
        rgba(255, 255, 255, 0.96);
      box-shadow:
        0 20px 42px rgba(15, 23, 42, 0.18),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    body.home-active.theme-light .notes-panel::before {
      border-color: rgba(15, 23, 42, 0.16);
      background: rgba(255, 255, 255, 0.95);
    }

    body.home-active.theme-light .notes-panel-header {
      border-bottom-color: rgba(15, 23, 42, 0.1);
    }

    body.home-active.theme-light .files-panel {
      border-color: rgba(15, 23, 42, 0.16);
      background:
        linear-gradient(155deg, rgba(255, 255, 255, 0.96) 0%, rgba(247, 251, 255, 0.94) 100%),
        rgba(255, 255, 255, 0.96);
      box-shadow:
        0 20px 42px rgba(15, 23, 42, 0.18),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    body.home-active.theme-light .files-panel::before {
      border-color: rgba(15, 23, 42, 0.16);
      background: rgba(255, 255, 255, 0.95);
    }

    body.home-active.theme-light .files-panel-header {
      border-bottom-color: rgba(15, 23, 42, 0.1);
    }

    body.home-active.theme-light .files-panel-title {
      color: rgba(15, 23, 42, 0.78);
    }

    body.home-active.theme-light .files-upload-zone {
      border-color: rgba(59, 130, 246, 0.3);
      background: rgba(59, 130, 246, 0.05);
    }

    body.home-active.theme-light .files-upload-zone:hover {
      border-color: rgba(59, 130, 246, 0.5);
      background: rgba(59, 130, 246, 0.1);
    }

    body.home-active.theme-light .files-upload-text {
      color: rgba(15, 23, 42, 0.6);
    }

    body.home-active.theme-light .files-empty-state {
      color: rgba(15, 23, 42, 0.4);
    }

    body.home-active.theme-light .file-item {
      background: rgba(0, 0, 0, 0.04);
      border-color: rgba(0, 0, 0, 0.08);
    }

    body.home-active.theme-light .file-item:hover {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.12);
    }

    body.home-active.theme-light .file-name {
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .file-meta {
      color: rgba(15, 23, 42, 0.5);
    }

    body.home-active.theme-light .file-meta-badge {
      border-color: rgba(15, 23, 42, 0.15);
      background: rgba(15, 23, 42, 0.06);
      color: rgba(15, 23, 42, 0.7);
    }

    body.home-active.theme-light .file-meta-badge.credit-report {
      border-color: rgba(37, 99, 235, 0.25);
      background: rgba(37, 99, 235, 0.1);
      color: rgba(30, 64, 175, 0.95);
    }

    body.home-active.theme-light .file-meta-badge.party-applicant {
      border-color: rgba(22, 163, 74, 0.25);
      background: rgba(22, 163, 74, 0.1);
      color: rgba(22, 101, 52, 0.95);
    }

    body.home-active.theme-light .file-meta-badge.party-coapp {
      border-color: rgba(217, 119, 6, 0.28);
      background: rgba(217, 119, 6, 0.12);
      color: rgba(146, 64, 14, 0.95);
    }

    body.home-active.theme-light .file-btn {
      border-color: rgba(0, 0, 0, 0.15);
      color: rgba(15, 23, 42, 0.5);
    }

    body.home-active.theme-light .file-btn:hover {
      background: rgba(0, 0, 0, 0.08);
      border-color: rgba(0, 0, 0, 0.2);
      color: rgba(15, 23, 42, 0.8);
    }

    body.home-active.theme-light .file-viewer-modal-content {
      background: linear-gradient(155deg, rgba(255, 255, 255, 0.98) 0%, rgba(247, 251, 255, 0.96) 100%);
      border-color: rgba(15, 23, 42, 0.15);
    }

    body.home-active.theme-light .file-viewer-modal-header,
    body.home-active.theme-light .file-viewer-modal-footer {
      border-color: rgba(15, 23, 42, 0.1);
    }

    body.home-active.theme-light .file-viewer-modal-title {
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .file-viewer-modal-close {
      background: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.1);
      color: rgba(15, 23, 42, 0.5);
    }

    body.home-active.theme-light .file-viewer-modal-close:hover {
      background: rgba(0, 0, 0, 0.1);
      color: rgba(15, 23, 42, 0.8);
    }

    body.home-active.theme-light .file-viewer-btn {
      background: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.1);
      color: rgba(15, 23, 42, 0.7);
    }

    body.home-active.theme-light .file-viewer-btn:hover {
      background: rgba(0, 0, 0, 0.1);
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .file-viewer-modal-body .file-icon-large {
      color: rgba(15, 23, 42, 0.4);
    }

    body.home-active.theme-light .file-viewer-modal-body .file-icon-large p {
      color: rgba(15, 23, 42, 0.6);
    }

    body.home-active.theme-light .file-meta-modal-content {
      border-color: rgba(15, 23, 42, 0.16);
      background: linear-gradient(155deg, rgba(255, 255, 255, 0.97) 0%, rgba(247, 251, 255, 0.95) 100%);
      box-shadow: 0 30px 60px rgba(15, 23, 42, 0.2);
    }

    body.home-active.theme-light .file-meta-modal-header h3 {
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .file-meta-modal-subtitle,
    body.home-active.theme-light .file-meta-field label {
      color: rgba(15, 23, 42, 0.6);
    }

    body.home-active.theme-light .file-meta-field select {
      border-color: rgba(15, 23, 42, 0.16);
      background: rgba(255, 255, 255, 0.94);
      color: rgba(15, 23, 42, 0.88);
    }

    body.home-active.theme-light .file-meta-modal-btn {
      border-color: rgba(15, 23, 42, 0.16);
      background: rgba(15, 23, 42, 0.05);
      color: rgba(15, 23, 42, 0.78);
    }

    body.home-active.theme-light .file-thumbnail {
      border-color: transparent;
    }

    body.home-active.theme-light .file-thumbnail:hover {
      border-color: rgba(59, 130, 246, 0.5);
    }

    body.home-active.theme-light .notes-panel-title,
    body.home-active.theme-light .notes-composer-label,
    body.home-active.theme-light .notes-templates-title {
      color: rgba(15, 23, 42, 0.78);
    }

    body.home-active.theme-light .notes-save-status {
      color: rgba(15, 23, 42, 0.6);
    }

    body.home-active.theme-light .notes-composer {
      border-color: rgba(15, 23, 42, 0.14);
      background: rgba(255, 255, 255, 0.95);
      color: rgba(15, 23, 42, 0.92);
    }

    body.home-active.theme-light .notes-composer:focus {
      border-color: rgba(59, 130, 246, 0.58);
      background: rgba(255, 255, 255, 1);
    }

    body.home-active.theme-light .notes-feed-empty {
      border-color: rgba(15, 23, 42, 0.18);
      background: rgba(15, 23, 42, 0.03);
      color: rgba(15, 23, 42, 0.62);
    }

    body.home-active.theme-light .note-card {
      border-color: rgba(15, 23, 42, 0.12);
      background: rgba(255, 255, 255, 0.75);
    }

    body.home-active.theme-light .note-card.note-color-yellow {
      border-color: rgba(15, 23, 42, 0.12);
      background:
        linear-gradient(165deg, rgba(255, 235, 170, 0.45) 0%, rgba(255, 220, 120, 0.28) 100%),
        rgba(255, 255, 255, 0.75);
    }

    body.home-active.theme-light .note-card.note-color-red {
      border-color: rgba(239, 68, 68, 0.32);
      background:
        linear-gradient(165deg, rgba(248, 113, 113, 0.26) 0%, rgba(239, 68, 68, 0.17) 100%),
        rgba(255, 255, 255, 0.82);
    }

    body.home-active.theme-light .note-card.note-color-green {
      border-color: rgba(34, 197, 94, 0.3);
      background:
        linear-gradient(165deg, rgba(74, 222, 128, 0.25) 0%, rgba(34, 197, 94, 0.16) 100%),
        rgba(255, 255, 255, 0.82);
    }

    body.home-active.theme-light .note-card.note-color-blue {
      border-color: rgba(59, 130, 246, 0.3);
      background:
        linear-gradient(165deg, rgba(96, 165, 250, 0.26) 0%, rgba(59, 130, 246, 0.16) 100%),
        rgba(255, 255, 255, 0.82);
    }

    body.home-active.theme-light .note-card.note-color-gray {
      border-color: rgba(100, 116, 139, 0.28);
      background:
        linear-gradient(165deg, rgba(148, 163, 184, 0.26) 0%, rgba(100, 116, 139, 0.15) 100%),
        rgba(255, 255, 255, 0.82);
    }

    body.home-active.theme-light .note-card-author {
      color: rgba(15, 23, 42, 0.86);
    }

    body.home-active.theme-light .note-card-time {
      color: rgba(15, 23, 42, 0.58);
    }

    body.home-active.theme-light .note-card-content {
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .note-card-menu-btn {
      border-color: rgba(15, 23, 42, 0.18);
      background: rgba(15, 23, 42, 0.08);
      color: rgba(15, 23, 42, 0.82);
    }

    body.home-active.theme-light .note-card-menu-btn:hover {
      border-color: rgba(15, 23, 42, 0.3);
      background: rgba(15, 23, 42, 0.14);
    }

    body.home-active.theme-light .note-card-menu {
      border-color: rgba(15, 23, 42, 0.16);
      background:
        linear-gradient(160deg, rgba(255, 255, 255, 0.98) 0%, rgba(247, 251, 255, 0.98) 100%),
        rgba(255, 255, 255, 0.98);
      box-shadow: 0 16px 28px rgba(15, 23, 42, 0.2);
    }

    body.home-active.theme-light .note-card-menu-item {
      background: rgba(15, 23, 42, 0.04);
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .note-card-menu-item:hover {
      background: rgba(15, 23, 42, 0.1);
      border-color: rgba(15, 23, 42, 0.18);
    }

    body.home-active.theme-light .note-card-menu-item.danger {
      color: #b91c1c;
    }

    body.home-active.theme-light .note-card-menu-item.danger:hover {
      background: rgba(239, 68, 68, 0.16);
      border-color: rgba(239, 68, 68, 0.3);
    }

    body.home-active.theme-light .note-card-menu-divider {
      background: rgba(15, 23, 42, 0.14);
    }

    body.home-active.theme-light .note-card-menu-color-option.active {
      border-color: rgba(59, 130, 246, 0.38);
      background: rgba(59, 130, 246, 0.16);
    }

    body.home-active.theme-light .note-color-swatch {
      border-color: rgba(15, 23, 42, 0.28);
    }

    body.home-active.theme-light .notes-templates-block {
      border-top-color: rgba(15, 23, 42, 0.1);
    }

    body.home-active.theme-light .notes-template-select {
      border-color: rgba(15, 23, 42, 0.16);
      background: rgba(255, 255, 255, 0.96);
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .notes-btn {
      border-color: rgba(15, 23, 42, 0.14);
      background: rgba(15, 23, 42, 0.06);
      color: rgba(15, 23, 42, 0.88);
    }

    body.home-active.theme-light .notes-btn:hover {
      background: rgba(59, 130, 246, 0.14);
      border-color: rgba(59, 130, 246, 0.32);
    }

    body.home-active.theme-light .notes-btn.primary {
      background: rgba(37, 99, 235, 0.18);
      border-color: rgba(37, 99, 235, 0.36);
      color: rgba(15, 23, 42, 0.92);
    }

    body.home-active.theme-light .notes-btn.primary:hover {
      background: rgba(37, 99, 235, 0.24);
      border-color: rgba(37, 99, 235, 0.44);
    }

    body.home-active.theme-light .notes-btn.danger {
      background: rgba(239, 68, 68, 0.12);
      border-color: rgba(239, 68, 68, 0.32);
      color: rgba(127, 29, 29, 0.92);
    }

    body.home-active.theme-light .notes-btn.danger:hover {
      background: rgba(239, 68, 68, 0.18);
      border-color: rgba(239, 68, 68, 0.44);
    }

    body.home-active.theme-light .notes-templates-modal-backdrop {
      background: rgba(15, 23, 42, 0.32);
    }

    body.home-active.theme-light .notes-templates-modal-content {
      border-color: rgba(15, 23, 42, 0.16);
      background:
        linear-gradient(155deg, rgba(255, 255, 255, 0.98) 0%, rgba(246, 250, 255, 0.96) 100%),
        rgba(255, 255, 255, 0.98);
      box-shadow: 0 24px 46px rgba(15, 23, 42, 0.2);
    }

    body.home-active.theme-light .notes-templates-modal-header {
      border-bottom-color: rgba(15, 23, 42, 0.1);
    }

    body.home-active.theme-light .notes-templates-modal-header h3,
    body.home-active.theme-light .notes-templates-manager-label {
      color: rgba(15, 23, 42, 0.82);
    }

    body.home-active.theme-light .notes-templates-manager-select,
    body.home-active.theme-light .notes-templates-manager-input,
    body.home-active.theme-light .notes-templates-manager-textarea {
      border-color: rgba(15, 23, 42, 0.14);
      background: rgba(255, 255, 255, 0.95);
      color: rgba(15, 23, 42, 0.92);
    }

    body.home-active.theme-light .notes-templates-manager-input:focus,
    body.home-active.theme-light .notes-templates-manager-textarea:focus {
      border-color: rgba(59, 130, 246, 0.54);
      background: rgba(255, 255, 255, 1);
    }
    
    body.home-active.theme-light .copy-icon-btn {
      color: rgba(0, 0, 0, 0.4);
    }
    
    body.home-active.theme-light .copy-icon-btn:hover {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .copy-btn {
      background: transparent;
      color: rgba(0, 0, 0, 0.4);
    }
    
    body.home-active.theme-light .copy-btn:hover {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .copy-btn.copied {
      color: #16a34a;
    }
    
    body.home-active.theme-light .applicant-toggle-btn {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.12);
      color: rgba(0, 0, 0, 0.6);
    }
    
    body.home-active.theme-light .applicant-toggle-btn:hover {
      background: rgba(0, 0, 0, 0.1);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .applicant-type-label {
      background: rgba(0, 0, 0, 0.04);
      border-color: rgba(0, 0, 0, 0.1);
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .applicant-type-label.co-applicant {
      background: rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.25);
      color: #2563eb;
    }
    
    /* ============ INCLUDE CO-APPLICANT TOGGLE STYLES ============ */
    .include-toggle-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: 12px;
      padding-left: 12px;
      border-left: 1px solid rgba(255, 255, 255, 0.15);
      transition: all 0.3s ease;
    }
    
    .include-toggle-wrapper.hidden {
      display: none;
    }
    
    .include-toggle-status {
      font-size: 0.7rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.4);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      min-width: 28px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .include-toggle-wrapper.active .include-toggle-status {
      color: #2ecc71;
      text-shadow: 0 0 8px rgba(46, 204, 113, 0.5);
    }
    
    .include-toggle {
      position: relative;
      display: inline-block;
      width: 36px;
      height: 18px;
      cursor: pointer;
    }
    
    .include-toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .include-toggle-track {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 18px;
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }
    
    .include-toggle input:checked + .include-toggle-track {
      background: rgba(46, 204, 113, 0.25);
      box-shadow: 0 0 10px rgba(46, 204, 113, 0.25), inset 0 0 4px rgba(46, 204, 113, 0.15);
    }
    
    .include-toggle-thumb {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 14px;
      height: 14px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
    
    .include-toggle input:checked + .include-toggle-track .include-toggle-thumb {
      transform: translateX(18px);
      background: #2ecc71;
      box-shadow: 0 2px 6px rgba(46, 204, 113, 0.4);
    }
    
    /* Light theme styles for toggle */
    body.home-active.theme-light .include-toggle-wrapper {
      border-left-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .include-toggle-status {
      color: rgba(0, 0, 0, 0.3);
    }
    
    body.home-active.theme-light .include-toggle-wrapper.active .include-toggle-status {
      color: #27ae60;
      text-shadow: 0 0 6px rgba(39, 174, 96, 0.3);
    }
    
    body.home-active.theme-light .include-toggle-track {
      background: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .include-toggle input:checked + .include-toggle-track {
      background: rgba(39, 174, 96, 0.2);
      box-shadow: 0 0 8px rgba(39, 174, 96, 0.2), inset 0 0 3px rgba(39, 174, 96, 0.1);
    }
    
    body.home-active.theme-light .include-toggle-thumb {
      background: rgba(0, 0, 0, 0.25);
    }
    
    body.home-active.theme-light .include-toggle input:checked + .include-toggle-track .include-toggle-thumb {
      background: #27ae60;
      box-shadow: 0 2px 5px rgba(39, 174, 96, 0.35);
    }
    
    /* Badges en modo claro - Mejor contraste */
    body.home-active.theme-light .lead-state-badge.green {
      background: rgba(34, 197, 94, 0.15);
      color: #15803d;
      border-color: rgba(34, 197, 94, 0.4);
    }
    
    body.home-active.theme-light .lead-state-badge.red {
      background: rgba(239, 68, 68, 0.15);
      color: #b91c1c;
      border-color: rgba(239, 68, 68, 0.4);
    }

    body.home-active.theme-light .lead-status-badge-select {
      color-scheme: light;
      border-color: rgba(59, 130, 246, 0.3);
      background:
        linear-gradient(135deg, rgba(59, 130, 246, 0.13), rgba(59, 130, 246, 0.08)),
        rgba(255, 255, 255, 0.88);
      color: #1d4ed8;
    }

    body.home-active.theme-light .lead-status-badge-select option {
      background: #ffffff;
      color: #0f172a;
    }

    body.home-active.theme-light .lead-status-badge-select.new {
      color: #1d4ed8;
      border-color: rgba(59, 130, 246, 0.34);
    }

    body.home-active.theme-light .lead-status-badge-select.submitted {
      color: #047857;
      border-color: rgba(16, 185, 129, 0.36);
      background:
        linear-gradient(135deg, rgba(16, 185, 129, 0.14), rgba(16, 185, 129, 0.08)),
        rgba(255, 255, 255, 0.9);
    }

    body.home-active.theme-light .lead-status-badge-select.docs {
      color: #b45309;
      border-color: rgba(245, 158, 11, 0.36);
      background:
        linear-gradient(135deg, rgba(245, 158, 11, 0.14), rgba(245, 158, 11, 0.08)),
        rgba(255, 255, 255, 0.9);
    }

    body.home-active.theme-light .lead-status-badge-select.manager {
      color: #6d28d9;
      border-color: rgba(139, 92, 246, 0.36);
      background:
        linear-gradient(135deg, rgba(139, 92, 246, 0.14), rgba(139, 92, 246, 0.08)),
        rgba(255, 255, 255, 0.9);
    }

    body.home-active.theme-light .lead-status-badge-select.callback {
      color: #be185d;
      border-color: rgba(236, 72, 153, 0.36);
      background:
        linear-gradient(135deg, rgba(236, 72, 153, 0.14), rgba(236, 72, 153, 0.08)),
        rgba(255, 255, 255, 0.9);
    }

    body.home-active.theme-light .lead-status-badge-select.negative {
      color: #b91c1c;
      border-color: rgba(239, 68, 68, 0.36);
      background:
        linear-gradient(135deg, rgba(239, 68, 68, 0.14), rgba(239, 68, 68, 0.08)),
        rgba(255, 255, 255, 0.9);
    }
    
    body.home-active.theme-light .lead-test-badge {
      background: rgba(168, 85, 247, 0.15);
      color: #7c3aed;
      border-color: rgba(168, 85, 247, 0.4);
    }

    body.home-active.theme-light .lead-related-badge {
      background: rgba(59, 130, 246, 0.14);
      color: #1d4ed8;
      border-color: rgba(59, 130, 246, 0.35);
    }

    body.home-active.theme-light .lead-related-badge:hover {
      background: rgba(59, 130, 246, 0.22);
    }
    
    body.home-active.theme-light .lead-toolbar {
      border-top-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .toolbar-btn {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.1);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .toolbar-btn:hover {
      background: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .lead-info-card {
      background: rgba(255, 255, 255, 0.5);
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .lead-info-card h3 {
      color: rgba(0, 0, 0, 0.5);
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .info-row {
      border-bottom-color: rgba(0, 0, 0, 0.05);
    }
    
    body.home-active.theme-light .info-row-label {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .info-row-value {
      color: #1a1a1a;
    }

    body.home-active.theme-light .lead-best-time-select {
      border-color: rgba(0, 0, 0, 0.18);
      background: rgba(0, 0, 0, 0.04);
      color: #1a1a1a;
    }

    body.home-active.theme-light .lead-best-time-select:focus {
      border-color: #2563eb;
      background: rgba(0, 0, 0, 0.08);
    }
    
    body.home-active.theme-light .date-input {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.15);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .date-input:hover, 
    body.home-active.theme-light .date-input:focus {
      border-color: rgba(0, 0, 0, 0.3);
      background: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .fico-score {
      color: #2563eb;
    }
    
    body.home-active.theme-light .fico-score.pendiente {
      color: rgba(0, 0, 0, 0.4);
    }
    
    body.home-active.theme-light .liquid-glass-input {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.8) 0%, 
        rgba(255, 255, 255, 0.6) 100%
      );
      border-color: rgba(0, 0, 0, 0.15);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .liquid-glass-input:hover {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%, 
        rgba(255, 255, 255, 0.7) 100%
      );
      border-color: rgba(0, 0, 0, 0.25);
    }
    
    body.home-active.theme-light .liquid-glass-input:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
    }
    
    /* Toast notifications fix for light mode */
    body.home-active.theme-light .toast {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.95) 0%, 
        rgba(255, 255, 255, 0.85) 100%
      );
      border: 1px solid rgba(0, 0, 0, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .toast span {
      color: #1a1a1a;
    }
    
    /* Notification Modal */
    .notif-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }
    
    .notif-modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
    }
    
    .notif-modal-content {
      position: relative;
      width: 90%;
      max-width: 420px;
      max-height: min(86vh, 760px);
      background: linear-gradient(135deg, 
        rgba(30, 30, 40, 0.95) 0%, 
        rgba(20, 20, 30, 0.98) 100%
      );
      backdrop-filter: blur(40px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 24px 64px rgba(0, 0, 0, 0.4);
      animation: modalSlideIn 0.3s ease;
      overflow-y: auto;
    }
    
    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    .notif-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .notif-modal-header h3 {
      margin: 0;
      font-size: 1.1rem;
      color: white;
      font-weight: 600;
    }
    
    .notif-modal-close {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 8px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .notif-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }
    
    .notif-modal-close svg {
      width: 18px;
      height: 18px;
    }
    
    .notif-modal-body {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 400px;
      overflow-y: auto;
    }
    
    .notif-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      transition: all 0.2s ease;
    }
    
    .notif-item:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.15);
      transform: translateX(4px);
    }
    
    .notif-item.today {
      background: rgba(34, 197, 94, 0.1);
      border-color: rgba(34, 197, 94, 0.3);
    }
    
    .notif-item-pin {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.3) 0%, 
        rgba(34, 197, 94, 0.15) 100%
      );
      border: 1px solid rgba(34, 197, 94, 0.4);
      border-radius: 50%;
      color: #4ade80;
      flex-shrink: 0;
    }
    
    .notif-item-pin svg {
      width: 18px;
      height: 18px;
    }
    
    .notif-item-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    
    .notif-item-name {
      color: white;
      font-weight: 500;
      font-size: 0.95rem;
    }
    
    .notif-item-date {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.8rem;
    }
    
    .notif-item-date.today-badge {
      color: #4ade80;
      font-weight: 600;
    }
    
    .notif-item-link {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: white;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
    }
    
    .notif-item-link:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.3);
    }
    
    /* Light mode for notification modal */
    body.home-active.theme-light .notif-modal-content {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.98) 0%, 
        rgba(245, 245, 250, 0.99) 100%
      );
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .notif-modal-header h3 {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .notif-modal-close {
      background: rgba(0, 0, 0, 0.08);
      color: rgba(0, 0, 0, 0.6);
    }
    
    body.home-active.theme-light .notif-modal-close:hover {
      background: rgba(0, 0, 0, 0.12);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .notif-item {
      background: rgba(0, 0, 0, 0.03);
      border-color: rgba(0, 0, 0, 0.08);
    }
    
    body.home-active.theme-light .notif-item:hover {
      background: rgba(0, 0, 0, 0.06);
    }
    
    body.home-active.theme-light .notif-item.today {
      background: rgba(34, 197, 94, 0.08);
      border-color: rgba(34, 197, 94, 0.25);
    }
    
    body.home-active.theme-light .notif-item-name {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .notif-item-date {
      color: rgba(0, 0, 0, 0.5);
    }
    
    body.home-active.theme-light .notif-item-link {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.12);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .notif-item-link:hover {
      background: rgba(0, 0, 0, 0.1);
    }
    
    /* Light mode for custom calendar */
    body.home-active.theme-light .custom-calendar {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.98) 0%, 
        rgba(245, 245, 250, 0.99) 100%
      );
      border-color: rgba(0, 0, 0, 0.12);
      box-shadow: 
        0 24px 64px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }
    
    body.home-active.theme-light .calendar-title {
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .calendar-nav {
      background: rgba(0, 0, 0, 0.06);
      border-color: rgba(0, 0, 0, 0.1);
      color: #1a1a1a;
    }
    
    body.home-active.theme-light .calendar-nav:hover {
      background: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .calendar-weekdays span {
      color: rgba(0, 0, 0, 0.4);
    }
    
    body.home-active.theme-light .calendar-day {
      color: rgba(0, 0, 0, 0.8);
    }
    
    body.home-active.theme-light .calendar-day.other-month {
      color: rgba(0, 0, 0, 0.3);
    }
    
    body.home-active.theme-light .calendar-day:hover {
      background: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    body.home-active.theme-light .calendar-day.today {
      background: rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.3);
      color: #2563eb;
    }
    
    body.home-active.theme-light .calendar-day.selected {
      background: linear-gradient(135deg, 
        rgba(34, 197, 94, 0.2) 0%, 
        rgba(34, 197, 94, 0.1) 100%
      );
      border-color: rgba(34, 197, 94, 0.4);
      color: #16a34a;
    }
    
    body.home-active.theme-light .calendar-day.selected::after {
      background: #22c55e;
    }

    body.home-active.theme-light .calendar-jump-popover {
      background: rgba(255, 255, 255, 0.98);
      border-color: rgba(15, 23, 42, 0.14);
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.16);
    }

    body.home-active.theme-light .calendar-jump-input {
      border-color: rgba(15, 23, 42, 0.18);
      background: rgba(148, 163, 184, 0.12);
      color: rgba(15, 23, 42, 0.95);
    }

    body.home-active.theme-light .calendar-jump-input:focus {
      border-color: rgba(59, 130, 246, 0.55);
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.16);
    }

    body.home-active.theme-light .calendar-jump-apply {
      border-color: rgba(59, 130, 246, 0.35);
      background: rgba(59, 130, 246, 0.12);
      color: rgba(30, 64, 175, 0.95);
    }

    body.home-active.theme-light .calendar-jump-apply:hover {
      background: rgba(59, 130, 246, 0.2);
    }

    body.home-active.theme-light .calendar-jump-error {
      color: rgba(217, 119, 6, 0.95);
    }
    
    body.home-active.theme-light .liquid-glass-btn {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9) 0%, 
        rgba(255, 255, 255, 0.7) 100%
      );
      border-color: rgba(0, 0, 0, 0.12);
      color: #1a1a1a;
      box-shadow: 
        0 4px 24px rgba(0, 0, 0, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }
    
    body.home-active.theme-light .liquid-glass-btn:hover {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 1) 0%, 
        rgba(255, 255, 255, 0.85) 100%
      );
      border-color: rgba(0, 0, 0, 0.2);
    }
    
    body.home-active.theme-light .callback-mac-btn {
      background: #22c55e;
    }
    
    body.home-active.theme-light .callback-mac-btn:hover {
      background: #16a34a;
    }

    /* Pass de contraste global para tema claro */
    body.home-active.theme-light .loading {
      color: rgba(15, 23, 42, 0.66);
    }

    body.home-active.theme-light .loading svg {
      color: #2563eb;
      stroke: #2563eb;
    }

    body.home-active.theme-light .lead-state-badge,
    body.home-active.theme-light .lead-test-badge,
    body.home-active.theme-light .lead-related-badge,
    body.home-active.theme-light .plan-duration-badge {
      font-weight: 700;
    }

    body.home-active.theme-light .notif-item-date.today-badge {
      color: #15803d;
    }

    body.home-active.theme-light #bankingSection,
    body.home-active.theme-light #budgetSection,
    body.home-active.theme-light #creditorsSection {
      color: rgba(15, 23, 42, 0.62) !important;
    }

    body.home-active.theme-light #bankingSection h2,
    body.home-active.theme-light #budgetSection h2,
    body.home-active.theme-light #creditorsSection h2 {
      color: rgba(15, 23, 42, 0.9) !important;
    }

    body.home-active.theme-light #bankingSection p,
    body.home-active.theme-light #budgetSection p,
    body.home-active.theme-light #creditorsSection p {
      color: rgba(15, 23, 42, 0.62) !important;
    }

    body.home-active.theme-light #bankingSection svg,
    body.home-active.theme-light #budgetSection svg,
    body.home-active.theme-light #creditorsSection svg {
      stroke: rgba(15, 23, 42, 0.5) !important;
      opacity: 0.72 !important;
    }

    /* Pass de contraste v2 por pantalla (detalle de lead) */
    body.home-active.theme-light .lead-tabs-nav {
      background: rgba(255, 255, 255, 0.76);
      border-color: rgba(15, 23, 42, 0.14);
    }

    body.home-active.theme-light .lead-tab {
      color: rgba(15, 23, 42, 0.74);
    }

    body.home-active.theme-light .lead-tab:hover {
      color: rgba(15, 23, 42, 0.9);
      background: rgba(15, 23, 42, 0.08);
    }

    body.home-active.theme-light .lead-tab.active {
      color: #1d4ed8;
      background: rgba(59, 130, 246, 0.18);
    }

    body.home-active.theme-light .lead-info-card {
      background: rgba(255, 255, 255, 0.7);
      border-color: rgba(15, 23, 42, 0.12);
    }

    body.home-active.theme-light .lead-info-card h3 {
      color: rgba(15, 23, 42, 0.74);
    }

    body.home-active.theme-light .info-row-label {
      color: rgba(15, 23, 42, 0.7);
    }

    body.home-active.theme-light .info-row-value {
      color: rgba(15, 23, 42, 0.92);
    }

    body.home-active.theme-light .calc-column-title {
      color: rgba(15, 23, 42, 0.74);
    }

    body.home-active.theme-light .calc-result-label,
    body.home-active.theme-light .monthly-payment-label-minimal,
    body.home-active.theme-light .months-unit-inline {
      color: rgba(15, 23, 42, 0.68);
    }

    body.home-active.theme-light .calc-result-value,
    body.home-active.theme-light .monthly-payment-amount-minimal,
    body.home-active.theme-light .months-number,
    body.home-active.theme-light .calc-input-field {
      color: rgba(15, 23, 42, 0.92);
    }

    body.home-active.theme-light .schedule-table th {
      color: rgba(15, 23, 42, 0.78);
    }

    body.home-active.theme-light .schedule-table td {
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .notif-item-name {
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .notif-item-date {
      color: rgba(15, 23, 42, 0.62);
    }

    body.home-active.theme-light .notif-item-link {
      color: rgba(15, 23, 42, 0.86);
    }

    body.home-active.theme-light .calendar-weekdays span {
      color: rgba(15, 23, 42, 0.56);
    }

    body.home-active.theme-light .calendar-day {
      color: rgba(15, 23, 42, 0.84);
    }

    body.home-active.theme-light .calendar-day.other-month {
      color: rgba(15, 23, 42, 0.36);
    }

    body.home-active.theme-light .liquid-glass-btn {
      color: rgba(15, 23, 42, 0.86);
    }

    body.home-active.theme-light .calc-toggle-label-small {
      color: rgba(15, 23, 42, 0.84);
    }

    body.home-active.theme-light .calc-legal-state-hint {
      color: rgba(15, 23, 42, 0.72);
    }

    body.home-active.theme-light .calc-toggle {
      background: rgba(15, 23, 42, 0.18);
      border-color: rgba(15, 23, 42, 0.24);
    }

    body.home-active.theme-light .calc-toggle-thumb {
      background: #ffffff;
      box-shadow: 0 1px 3px rgba(15, 23, 42, 0.28);
    }

    body.home-active.theme-light .calc-toggle.active {
      background: rgba(22, 163, 74, 0.72);
      border-color: rgba(22, 163, 74, 0.66);
    }
    
    body.home-active.theme-light {
      background: #f5f5f7;
    }
    
    /* ============================================
       BANKING SECTION STYLES - Compacto tipo Lead Info
       ============================================ */
    .banking-main-card {
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
    }
    
    body.home-active.theme-light .banking-main-card {
      background: rgba(255, 255, 255, 0.6);
      border-color: rgba(0, 0, 0, 0.12);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }
    
    .banking-layout {
      gap: 24px;
    }
    
    .banking-account-column,
    .banking-holder-column {
      display: flex;
      flex-direction: column;
      gap: 0;
    }
    
    /* Filas tipo info-row del lead - compactas */
    .banking-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      gap: 12px;
      min-height: 40px;
    }
    
    .banking-row:last-child {
      border-bottom: none;
    }
    
    body.home-active.theme-light .banking-row {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }
    
    .banking-row .info-row-label {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
      flex-shrink: 0;
      white-space: nowrap;
    }
    
    body.home-active.theme-light .banking-row .info-row-label {
      color: rgba(0, 0, 0, 0.7);
      font-weight: 600;
    }
    
    .banking-input-wrap {
      position: relative;
      display: flex;
      align-items: center;
      flex: 1;
      max-width: 280px;
      min-width: 120px;
    }
    
    .banking-input-wrap.amount .banking-input-prefix {
      position: absolute;
      left: 10px;
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
    }
    
    body.home-active.theme-light .banking-input-wrap.amount .banking-input-prefix {
      color: rgba(0, 0, 0, 0.6);
    }
    
    .banking-input-wrap.amount .banking-input {
      padding-left: 22px;
    }
    
    .banking-input {
      width: 100%;
      padding: 6px 10px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 6px;
      color: white;
      font-size: 0.9rem;
      font-family: inherit;
      transition: all 0.2s ease;
      text-align: right;
    }
    
    body.home-active.theme-light .banking-input {
      background: rgba(255, 255, 255, 0.7);
      border-color: rgba(0, 0, 0, 0.2);
      color: #1a1a1a;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .banking-input:focus {
      outline: none;
      border-color: rgba(126, 234, 252, 0.6);
      background: rgba(255, 255, 255, 0.1);
    }
    
    body.home-active.theme-light .banking-input:focus {
      background: rgba(255, 255, 255, 0.9);
      border-color: #3b82f6;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
    }
    
    .banking-input::placeholder {
      color: rgba(255, 255, 255, 0.3);
      font-size: 0.85rem;
    }
    
    body.home-active.theme-light .banking-input::placeholder {
      color: rgba(0, 0, 0, 0.4);
    }
    
    .banking-select-wrap {
      position: relative;
      flex: 1;
      max-width: 280px;
      min-width: 120px;
    }
    
    .banking-select {
      width: 100%;
      padding: 6px 32px 6px 10px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 6px;
      color: white;
      font-size: 0.9rem;
      font-family: inherit;
      cursor: pointer;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-repeat: no-repeat !important;
      background-position: right 12px center !important;
      background-size: 14px 14px !important;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.6)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E") !important;
      text-align: right;
    }
    
    /* Ocultar flecha nativa en IE/Edge antiguos */
    .banking-select::-ms-expand {
      display: none;
    }
    
    body.home-active.theme-light .banking-select {
      background: rgba(255, 255, 255, 0.7);
      border-color: rgba(0, 0, 0, 0.2);
      color: #1a1a1a;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='rgba(0,0,0,0.5)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E") !important;
    }
    
    .banking-select:focus {
      outline: none;
      border-color: rgba(126, 234, 252, 0.6);
    }
    
    /* Expandibles más compactos */
    .banking-expandable {
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    body.home-active.theme-light .banking-expandable {
      border-bottom-color: rgba(0, 0, 0, 0.05);
    }
    
    .banking-expand-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 0;
      background: transparent;
      border: none;
      color: rgba(126, 234, 252, 0.8);
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      width: fit-content;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    body.home-active.theme-light .banking-expand-btn {
      color: #1e40af;
    }
    
    .banking-expand-btn:hover {
      color: #7eeafc;
    }
    
    body.home-active.theme-light .banking-expand-btn:hover {
      color: #1e3a8a;
    }
    
    .banking-expand-btn svg {
      transition: transform 0.2s ease;
      width: 12px;
      height: 12px;
    }
    
    .banking-expand-btn.expanded svg {
      transform: rotate(45deg);
    }
    
    .banking-expandable-content {
      padding: 0 0 12px 16px;
      display: flex;
      flex-direction: column;
      gap: 0;
    }
    
    .banking-expandable-content.hidden {
      display: none;
    }
    
    .banking-action-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: rgba(59, 130, 246, 0.15);
      border: 1px solid rgba(59, 130, 246, 0.3);
      border-radius: 6px;
      color: #60a5fa;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      margin: 8px 0;
      width: fit-content;
    }
    
    body.home-active.theme-light .banking-action-btn {
      background: rgba(59, 130, 246, 0.1);
      color: #2563eb;
      border-color: rgba(59, 130, 246, 0.25);
    }
    
    .banking-action-btn:hover {
      background: rgba(59, 130, 246, 0.25);
      border-color: rgba(59, 130, 246, 0.5);
    }
    
    /* Sección de guardar */
    .banking-save-section {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    body.home-active.theme-light .banking-save-section {
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    .banking-save-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 20px;
      background: linear-gradient(135deg, rgba(126, 234, 252, 0.9), rgba(59, 130, 246, 0.9));
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
    }
    
    .banking-save-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 14px rgba(59, 130, 246, 0.4);
    }
    
    .banking-save-btn svg {
      stroke: white;
      width: 14px;
      height: 14px;
    }
    
    .banking-save-status {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
    }
    
    body.home-active.theme-light .banking-save-status {
      color: rgba(0, 0, 0, 0.6);
    }
    
    .banking-save-status.success {
      color: #4ade80;
    }
    
    body.home-active.theme-light .banking-save-status.success {
      color: #16a34a;
    }
    
    .banking-save-status.error {
      color: #f87171;
    }
    
    body.home-active.theme-light .banking-save-status.error {
      color: #dc2626;
    }
    
    /* Títulos de columna tipo lead-info-card */
    .banking-account-column .calc-column-title,
    .banking-holder-column .calc-column-title {
      margin: 0 0 12px 0;
      font-size: 0.7rem;
      color: rgba(255, 255, 255, 0.4);
      text-transform: uppercase;
      letter-spacing: 1px;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    body.home-active.theme-light .banking-account-column .calc-column-title,
    body.home-active.theme-light .banking-holder-column .calc-column-title {
      color: rgba(0, 0, 0, 0.6);
      border-bottom-color: rgba(0, 0, 0, 0.15);
    }
    
    @media (max-width: 900px) {
      .banking-layout {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .banking-input-wrap,
      .banking-select-wrap {
        max-width: 200px;
      }
    }
    
    @media (max-width: 600px) {
      .banking-row {
        flex-wrap: wrap;
        gap: 6px;
      }
      
      .banking-input-wrap,
      .banking-select-wrap {
        max-width: 100%;
        width: 100%;
      }
      
      .banking-input,
      .banking-select {
        text-align: left;
      }
    }

    /* ============================================
       CREDITORS SECTION
       ============================================ */
    .creditors-main-card {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .creditors-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      flex-wrap: wrap;
    }

    .creditors-header-title h3 {
      margin: 0;
      font-size: 1rem;
      font-weight: 650;
    }

    .creditors-header-title p {
      margin: 4px 0 0 0;
      font-size: 0.82rem;
      color: rgba(255, 255, 255, 0.6);
    }

    .creditors-summary-chips {
      display: grid;
      grid-template-columns: repeat(3, minmax(170px, 1fr));
      gap: 8px;
      width: min(100%, 560px);
    }

    .creditors-chip {
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 10px;
      padding: 8px 10px;
      background: rgba(255, 255, 255, 0.04);
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-height: 62px;
    }

    .creditors-chip span {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.4px;
      color: rgba(255, 255, 255, 0.6);
    }

    .creditors-chip strong {
      font-size: 1rem;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.94);
    }

    .creditors-tools {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .creditors-upload-btn,
    .creditors-btn {
      border: 1px solid rgba(126, 234, 252, 0.28);
      border-radius: 8px;
      background: rgba(59, 130, 246, 0.14);
      color: rgba(218, 244, 255, 0.94);
      font-size: 0.78rem;
      font-weight: 600;
      padding: 8px 12px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .creditors-btn.secondary {
      border-color: rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.06);
      color: rgba(255, 255, 255, 0.88);
    }

    .creditors-upload-btn:hover,
    .creditors-btn:hover {
      background: rgba(59, 130, 246, 0.24);
      border-color: rgba(126, 234, 252, 0.56);
    }

    .creditors-btn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
    }

    .creditors-status {
      margin-left: auto;
      font-size: 0.78rem;
      color: rgba(255, 255, 255, 0.66);
    }

    .creditors-status.success {
      color: #4ade80;
    }

    .creditors-status.error {
      color: #f87171;
    }

    .creditors-text-input-wrap {
      display: grid;
      gap: 6px;
    }

    .creditors-text-input-wrap label {
      font-size: 0.73rem;
      text-transform: uppercase;
      letter-spacing: 0.45px;
      color: rgba(255, 255, 255, 0.56);
    }

    .creditors-text-input {
      min-height: 96px;
      resize: vertical;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      background: rgba(6, 13, 24, 0.52);
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.82rem;
      padding: 10px;
      line-height: 1.4;
    }

    .creditors-text-input:focus {
      outline: none;
      border-color: rgba(126, 234, 252, 0.56);
    }

    .creditors-manual-form {
      display: grid;
      grid-template-columns: repeat(4, minmax(140px, 1fr));
      gap: 8px;
      border: 1px dashed rgba(255, 255, 255, 0.22);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.03);
    }

    .creditors-manual-form.hidden {
      display: none;
    }

    .creditors-manual-field {
      display: grid;
      gap: 4px;
    }

    .creditors-manual-field label {
      font-size: 0.68rem;
      text-transform: uppercase;
      letter-spacing: 0.45px;
      color: rgba(255, 255, 255, 0.58);
    }

    .creditors-manual-field input,
    .creditors-manual-field select {
      border-radius: 7px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(255, 255, 255, 0.06);
      color: rgba(255, 255, 255, 0.92);
      padding: 7px 8px;
      font-size: 0.82rem;
    }

    .creditors-manual-actions {
      grid-column: 1 / -1;
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    .creditors-preview-wrap {
      display: grid;
      gap: 8px;
    }

    .creditors-preview-wrap.hidden {
      display: none;
    }

    .creditors-preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .creditors-preview-header h4 {
      margin: 0;
      font-size: 0.86rem;
      color: rgba(255, 255, 255, 0.86);
    }

    .creditors-preview-header label {
      font-size: 0.76rem;
      color: rgba(255, 255, 255, 0.7);
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .creditors-table-wrap {
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: auto;
      max-height: 330px;
      background: rgba(255, 255, 255, 0.02);
    }

    .creditors-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 900px;
    }

    .creditors-table th,
    .creditors-table td {
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      padding: 8px;
      font-size: 0.79rem;
      text-align: left;
      vertical-align: middle;
    }

    .creditors-table th {
      position: sticky;
      top: 0;
      z-index: 2;
      background: rgba(6, 13, 24, 0.95);
      color: rgba(255, 255, 255, 0.72);
      text-transform: uppercase;
      letter-spacing: 0.45px;
      font-size: 0.68rem;
      font-weight: 700;
    }

    .creditors-table td.actions-cell {
      white-space: nowrap;
    }

    .creditors-inline-input {
      width: 95px;
      border-radius: 6px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.06);
      color: rgba(255, 255, 255, 0.92);
      padding: 5px 6px;
      font-size: 0.78rem;
    }

    .creditors-inline-input.small {
      width: 70px;
    }

    .creditors-row-empty {
      text-align: center;
      color: rgba(255, 255, 255, 0.56);
      font-size: 0.8rem;
      padding: 12px;
    }

    .creditors-table .mono {
      font-variant-numeric: tabular-nums;
    }

    body.home-active.theme-light .creditors-header-title p,
    body.home-active.theme-light .creditors-chip span,
    body.home-active.theme-light .creditors-status,
    body.home-active.theme-light .creditors-text-input-wrap label,
    body.home-active.theme-light .creditors-manual-field label,
    body.home-active.theme-light .creditors-preview-header label {
      color: rgba(15, 23, 42, 0.66);
    }

    body.home-active.theme-light .creditors-chip {
      border-color: rgba(15, 23, 42, 0.12);
      background: rgba(255, 255, 255, 0.7);
    }

    body.home-active.theme-light .creditors-chip strong,
    body.home-active.theme-light .creditors-preview-header h4 {
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .creditors-upload-btn,
    body.home-active.theme-light .creditors-btn {
      border-color: rgba(37, 99, 235, 0.28);
      background: rgba(59, 130, 246, 0.1);
      color: rgba(30, 64, 175, 0.95);
    }

    body.home-active.theme-light .creditors-btn.secondary {
      border-color: rgba(15, 23, 42, 0.14);
      background: rgba(15, 23, 42, 0.06);
      color: rgba(15, 23, 42, 0.86);
    }

    body.home-active.theme-light .creditors-text-input {
      border-color: rgba(15, 23, 42, 0.16);
      background: rgba(255, 255, 255, 0.86);
      color: rgba(15, 23, 42, 0.92);
    }

    body.home-active.theme-light .creditors-manual-form {
      border-color: rgba(15, 23, 42, 0.22);
      background: rgba(255, 255, 255, 0.56);
    }

    body.home-active.theme-light .creditors-manual-field input,
    body.home-active.theme-light .creditors-manual-field select,
    body.home-active.theme-light .creditors-inline-input {
      border-color: rgba(15, 23, 42, 0.2);
      background: rgba(255, 255, 255, 0.92);
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .creditors-table-wrap {
      border-color: rgba(15, 23, 42, 0.12);
      background: rgba(255, 255, 255, 0.66);
    }

    body.home-active.theme-light .creditors-table th {
      background: rgba(241, 245, 249, 0.95);
      color: rgba(15, 23, 42, 0.76);
      border-bottom-color: rgba(15, 23, 42, 0.12);
    }

    body.home-active.theme-light .creditors-table td {
      border-bottom-color: rgba(15, 23, 42, 0.08);
      color: rgba(15, 23, 42, 0.9);
    }

    body.home-active.theme-light .creditors-row-empty {
      color: rgba(15, 23, 42, 0.54);
    }

    @media (max-width: 980px) {
      .creditors-summary-chips {
        grid-template-columns: 1fr;
        width: 100%;
      }
    }

    @media (max-width: 860px) {
      .creditors-manual-form {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (max-width: 620px) {
      .creditors-manual-form {
        grid-template-columns: 1fr;
      }
      .creditors-status {
        margin-left: 0;
        width: 100%;
      }
    }
    
    /* Creditors styles moved to creditors-compact.css */</style>
</head>
<body class="home-active theme-dark">
  <div class="page-bg"></div>
  <div class="page-overlay"></div>
  
  <main class="lead-view-wrapper">
    <div class="lead-floating">
      <!-- Logo -->
      <button class="lead-logo" type="button" aria-label="Ir al leaderboard" onclick="window.location.href='index.html'">
        <img src="reference/CD logo.png" alt="Cero Deuda" />
      </button>
      
      <!-- TOOLBAR - Copiado idéntico del dashboard -->
      <div id="toolbarWrap" class="toolbar-wrap" aria-label="Barra de accesos">
        <div id="toolbarShell" class="toolbar-shell">
          <div class="toolbar-glass-container">
            <div class="toolbar-glass-bg"></div>
            
            <div class="toolbar-content">
              <div class="toolbar-group toolbar-left" aria-label="Accesos izquierda">
                <button id="leadsBtn" class="tool-btn" type="button" aria-label="Leads" onclick="window.location.href='index.html#leads'">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="6" cy="7" r="2.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 18C2 15.2386 4.23858 13 7 13H7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="18" cy="7" r="2.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 18C22 15.2386 19.7614 13 17 13H16.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="9" r="3" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span>Leads</span>
                </button>

                <button class="tool-btn" type="button" aria-label="Calendario">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect x="3" y="5" width="18" height="16" rx="3" />
                    <path d="M3 9h18M8 3v4M16 3v4" />
                  </svg>
                  <span>Calendario</span>
                </button>
              </div>

              <div class="search-central-unit">
                <label class="home-search-shell search" for="homeSearch">
                  <svg class="search-glyph" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M10.5 3.5a7 7 0 1 0 4.49 12.37l4.32 4.31 1.41-1.41-4.31-4.32A7 7 0 0 0 10.5 3.5Zm0 2a5 5 0 1 1 0 10 5 5 0 0 1 0-10Z" />
                  </svg>
                  <input
                    id="homeSearch"
                    class="home-search-input"
                    type="search"
                    placeholder="Buscar cliente..."
                    aria-label="Buscar"
                  />
                </label>

                <button
                  id="toolbarToggle"
                  class="toolbar-toggle"
                  type="button"
                  aria-label="Mostrar accesos"
                  aria-expanded="false"
                >
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 12H21M3 6H21M3 18H21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              </div>

              <div class="toolbar-group toolbar-right" aria-label="Accesos derecha">
                <button class="tool-btn" type="button" aria-label="Notificaciones">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M12 3a5 5 0 0 0-5 5v2.2c0 1.1-.4 2.1-1.1 2.9L4.8 14.3a1 1 0 0 0 .7 1.7h13a1 1 0 0 0 .7-1.7l-1.1-1.2a4.2 4.2 0 0 1-1.1-2.9V8a5 5 0 0 0-5-5Z" />
                    <path d="M10 18a2 2 0 0 0 4 0" />
                  </svg>
                  <span>Notifs</span>
                </button>

                <button class="tool-btn" type="button" aria-label="Correos">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect x="3" y="5" width="18" height="14" rx="2" />
                    <path d="m4 7 8 6 8-6" />
                  </svg>
                  <span>Correos</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Account Actions -->
      <div class="home-actions" aria-label="Cuenta y ajustes">
        <button
          id="accountBtn"
          class="account-icon-btn"
          type="button"
          aria-label="Cuenta"
          aria-haspopup="true"
          aria-expanded="false"
        >
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="8" r="4" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4 20C4 16.6863 6.68629 14 10 14H14C17.3137 14 20 16.6863 20 20" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <div id="accountMenu" class="account-menu hidden" role="menu" aria-label="Ajustes de cuenta">
          <p class="account-menu-title">Ajustes rapidos</p>

          <label class="theme-inline-toggle" for="themeSwitch" aria-label="Cambiar tema">
            <input id="themeSwitch" class="theme-switch-input" type="checkbox" aria-label="Toggle de tema" />
            
            <svg class="icon icon-moon-side" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M21 12.79A9 9 0 1 1 11.21 3c.49 0 .74.59.38.93A7 7 0 0 0 20.07 11.4c.34-.36.93-.11.93.39Z" />
            </svg>

            <span class="theme-switch-track" aria-hidden="true">
              <span class="theme-switch-thumb"></span>
            </span>

            <svg class="icon icon-sun-side" viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="12" cy="12" r="4" />
              <path d="M12 2v2.2M12 19.8V22M22 12h-2.2M4.2 12H2M19.07 4.93l-1.56 1.56M6.49 17.51l-1.56 1.56M19.07 19.07l-1.56-1.56M6.49 6.49 4.93 4.93" />
            </svg>
          </label>

          <div class="account-menu-divider" role="separator"></div>

          <button id="logoutBtn" class="logout-btn" type="button" role="menuitem">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
              <polyline points="16 17 21 12 16 7" />
              <line x1="21" y1="12" x2="9" y2="12" />
            </svg>
            <span>Cerrar sesión</span>
          </button>
        </div>
      </div>

      <!-- CONTENIDO DEL LEAD -->
      <div class="lead-content-area">
        <header class="lead-header">
          <div class="lead-title-section">
            <!-- Nombre editable -->
            <div class="lead-name-wrapper">
              <!-- Botón de cambio Applicant/Co-Applicant -->
              <button id="applicantToggleBtn" class="applicant-toggle-btn" title="Cambiar a Co-Applicant">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M7 10h14l-4-4"/>
                  <path d="M17 14H3l4 4"/>
                </svg>
              </button>
              <span id="applicantTypeLabel" class="applicant-type-label">Applicant</span>
              
              <h1 id="leadName" class="lead-name-text" contenteditable="false" title="Click para editar"></h1>
              
              <!-- Botón de copiar nombre - solo icono, sin box -->
              <button id="copyNameBtn" class="copy-btn" title="Copiar nombre">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                </svg>
              </button>
            </div>
            
            <!-- Badge de State Type (Green/Red) -->
            <span id="stateBadge" class="lead-state-badge"></span>

            <select id="leadStatusBadgeSelect" class="lead-status-badge-select" aria-label="Cambiar status del lead"></select>
            
            <!-- Badge de Test (si aplica) -->
            <span id="testBadge" class="lead-test-badge hidden">Test</span>

            <!-- Badge de relación -->
            <a id="relatedLeadBadge" class="lead-related-badge hidden" href="#" title="Abrir lead relacionado">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.07 0l2.83-2.83a5 5 0 0 0-7.07-7.07L11 4"/>
                <path d="M14 11a5 5 0 0 0-7.07 0L4.1 13.83a5 5 0 0 0 7.07 7.07L13 19"/>
              </svg>
              <span id="relatedLeadBadgeText">Relacionado con #</span>
            </a>
          </div>
          
          <!-- Case ID y botones de acción -->
          <div class="lead-case-id">
            <div class="case-id-left">
              <span class="case-label">Case ID:</span>
              <span id="caseNumber" class="case-number"></span>
              <button id="copyCaseBtn" class="copy-icon-btn" title="Copiar Case ID">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                </svg>
              </button>
              
              <!-- Toggle Include Co-Applicant (solo visible en modo Co-Applicant) -->
              <div id="includeCoAppToggleWrapper" class="include-toggle-wrapper hidden">
                <span id="includeToggleStatus" class="include-toggle-status">OFF</span>
                <label class="include-toggle">
                  <input type="checkbox" id="includeCoAppToggle">
                  <span class="include-toggle-track">
                    <span class="include-toggle-thumb"></span>
                  </span>
                </label>
              </div>
            </div>
            
            <!-- Botones de acción al lado del Case ID -->
            <div class="case-id-actions">
              <div class="lead-assignee-wrap">
                <div class="lead-assignee-meta">
                  <span class="lead-assignee-label">Assigned To</span>
                  <div class="lead-assignee-combo">
                    <input id="leadAssigneeInput" class="lead-assignee-input" type="search" placeholder="Buscar agente..." autocomplete="off" aria-label="Buscar agente para asignar" aria-haspopup="listbox" aria-expanded="false" aria-controls="leadAssigneeSuggestions" />
                    <button id="leadAssigneeToggleBtn" class="lead-assignee-toggle" type="button" title="Ver agentes" aria-label="Ver agentes">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                      </svg>
                    </button>
                  </div>
                  <div id="leadAssigneeSuggestions" class="lead-assignee-suggestions hidden" role="listbox" aria-label="Agentes disponibles"></div>
                </div>
                <button id="confirmAssigneeBtn" class="lead-assignee-confirm hidden" type="button" title="Confirmar asignación" aria-label="Confirmar asignación">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 6 9 17l-5-5"></path>
                  </svg>
                </button>
              </div>

              <!-- Botón de Archivos -->
              <div class="files-anchor">
                <button class="action-icon-btn" id="filesBtn" title="Archivos" aria-controls="filesPanel" aria-expanded="false">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14,2 14,8 20,8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10,9 9,9 8,9"/>
                  </svg>
                </button>
                <section id="filesPanel" class="files-panel hidden" aria-label="Archivos del lead">
                  <div class="files-panel-header">
                    <span class="files-panel-title">Archivos</span>
                    <button class="files-panel-close modal-close-mac" id="filesCloseBtn" type="button" title="Cerrar archivos"></button>
                  </div>
                  <div class="files-panel-body">
                    <!-- Upload Zone -->
                    <div class="files-upload-zone" id="filesUploadZone">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="32" height="32">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17,8 12,3 7,8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                      </svg>
                      <span class="files-upload-text">Arrastra archivos aquí o haz clic para seleccionar (requiere clasificación)</span>
                      <input type="file" id="filesUploadInput" class="files-upload-input" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png">
                    </div>
                    <!-- Files List -->
                    <div class="files-list" id="filesList">
                      <div class="files-empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="48" height="48">
                          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                          <polyline points="14,2 14,8 20,8"/>
                        </svg>
                        <p>No hay archivos aún</p>
                        <span>Los archivos subidos aparecerán aquí</span>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
              <button class="action-icon-btn" id="callBtn" title="Llamar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/>
                </svg>
              </button>
              <button class="action-icon-btn" id="emailBtn" title="Enviar Email">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                  <polyline points="22,6 12,13 2,6"/>
                </svg>
              </button>
              <div class="notes-anchor">
                <button class="action-icon-btn" id="notesBtn" title="Notas" aria-controls="notesPanel" aria-expanded="false">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
                <section id="notesPanel" class="notes-panel hidden" aria-label="Notas del lead">
                  <div class="notes-panel-header">
                    <span class="notes-panel-title">Notas</span>
                    <button class="notes-panel-close modal-close-mac" id="notesCloseBtn" type="button" title="Cerrar notas"></button>
                  </div>
                  <div class="notes-panel-body">
                    <div id="notesComposerWrap" class="hidden">
                      <label class="notes-composer-label" for="notesComposerTextarea">Nueva nota</label>
                      <textarea id="notesComposerTextarea" class="notes-composer" placeholder="Escribe una nota y presiona Agregar..."></textarea>
                    </div>
                    <div class="notes-actions-row">
                      <button id="notesAddBtn" class="notes-btn primary" type="button">Agregar nota</button>
                      <span id="notesStatus" class="notes-save-status">Sin notas</span>
                    </div>
                    <div id="notesList" class="notes-feed" aria-live="polite"></div>
                    <div class="notes-templates-block">
                      <div class="notes-templates-header">
                        <span class="notes-templates-title">Templates</span>
                      </div>
                      <select id="notesTemplateSelect" class="notes-template-select" aria-label="Seleccionar template">
                        <option value="">Seleccionar template...</option>
                      </select>
                      <div class="notes-template-actions notes-template-actions-clean">
                        <button id="notesTemplateUseBtn" class="notes-btn" type="button">Usar</button>
                        <button id="notesTemplateManageBtn" class="notes-btn" type="button">Editar mis templates</button>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
            </div>

          </div>

          <!-- Navegación de pestañas -->
          <div class="lead-tabs-nav">
            <button class="lead-tab active" data-tab="lead">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              Lead
            </button>
            <button class="lead-tab" data-tab="creditors">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
              Creditors
            </button>
            <button class="lead-tab" data-tab="budget">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <!-- Cartera -->
                <path d="M19 7H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" fill="rgba(59, 130, 246, 0.15)"/>
                <path d="M19 7H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                <path d="M16 11h4v4h-4z"/>
                <circle cx="18" cy="13" r="0.8" fill="currentColor"/>
                <!-- Planta/rama saliendo -->
                <path d="M12 7V4c0-1.5 1-2 2-2s2 0.5 2 2" stroke="#4ade80" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M14 4c0-2 1.5-3 3-3s3 1 3 3-1.5 3-3 3" stroke="#4ade80" stroke-width="1.5" stroke-linecap="round"/>
                <ellipse cx="17" cy="2.5" rx="1.5" ry="2" fill="#4ade80" opacity="0.9"/>
                <ellipse cx="20" cy="3.5" rx="1.5" ry="2" fill="#4ade80" opacity="0.9"/>
                <ellipse cx="15.5" cy="5" rx="1.2" ry="1.8" fill="#4ade80" opacity="0.9"/>
              </svg>
              Budget
            </button>
            <button class="lead-tab" data-tab="calculator">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="4" y="2" width="16" height="20" rx="2"/>
                <line x1="8" y1="6" x2="16" y2="6"/>
                <line x1="16" y1="14" x2="16" y2="14"/>
                <path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01"/>
              </svg>
              Calculator
            </button>
            <button class="lead-tab" data-tab="banking">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="2" y="5" width="20" height="14" rx="2"/>
                <line x1="2" y1="10" x2="22" y2="10"/>
              </svg>
              Banking
            </button>
          </div>
          

        </header>
        
        <!-- Contenido dinámico -->
        <!-- Sección Lead (Detalles) - Visible por defecto -->
        <div id="leadSection" class="lead-content-grid">
          <div class="loading">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48 2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48 2.83-2.83"/>
            </svg>
            <p>Cargando información del cliente...</p>
          </div>
        </div>
        
        <!-- Sección Calculator -->
        <div id="calculatorSection" class="lead-content-grid hidden" style="grid-template-columns: 1fr;">
          <!-- Calculator Box - Estilo Tiempos y Fechas -->
          <div class="lead-info-card lead-info-card-wide calculator-main-card">
            <div class="two-column-layout calc-layout">
              <!-- Columna Izquierda: Configuración -->
              <div class="info-column calc-config-column">
                <h4 class="calc-column-title">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:18px;height:18px;margin-right:6px;vertical-align:middle;">
                    <!-- Cartera -->
                    <path d="M19 7H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" fill="rgba(59, 130, 246, 0.2)"/>
                    <path d="M19 7H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                    <path d="M16 11h4v4h-4z"/>
                    <circle cx="18" cy="13" r="0.8" fill="currentColor"/>
                    <!-- Planta/rama saliendo -->
                    <path d="M12 7V4c0-1.5 1-2 2-2s2 0.5 2 2" stroke="#4ade80" stroke-linecap="round"/>
                    <path d="M14 4c0-2 1.5-3 3-3s3 1 3 3-1.5 3-3 3" stroke="#4ade80" stroke-linecap="round"/>
                    <ellipse cx="17" cy="2.5" rx="1.5" ry="2" fill="#4ade80" opacity="0.8"/>
                    <ellipse cx="20" cy="3.5" rx="1.5" ry="2" fill="#4ade80" opacity="0.8"/>
                    <ellipse cx="15.5" cy="5" rx="1.2" ry="1.8" fill="#4ade80" opacity="0.8"/>
                  </svg>
                  Configuración
                </h4>
                
                <div class="info-row calc-input-row">
                  <span class="info-row-label">Total Debt</span>
                  <div class="calc-input-minimal copy-on-click" id="copyTotalDebt" title="Click para copiar">
                    <span class="calc-input-prefix">$</span>
                    <input type="text" class="calc-input-field" id="calcTotalDebt" value="0.00" readonly>
                  </div>
                </div>
                
                <div class="info-row calc-input-row">
                  <span class="info-row-label">Estimated Settlement</span>
                  <div class="calc-input-minimal protected" data-field="settlementPercent">
                    <button class="lock-toggle-btn" data-target="calcSettlementPercent" title="Click para desbloquear">
                      <svg class="lock-icon-svg locked" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <circle cx="12" cy="7" r="4"/>
                      </svg>
                      <svg class="lock-icon-svg unlocked hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 9.9-1"/>
                      </svg>
                    </button>
                    <input type="text" class="calc-input-field percent" id="calcSettlementPercent" value="55" readonly>
                    <span class="calc-input-suffix">%</span>
                  </div>
                </div>
                
                <div class="info-row calc-input-row">
                  <span class="info-row-label">Program Fee</span>
                  <div class="calc-input-minimal protected" data-field="programFeePercent">
                    <button class="lock-toggle-btn" data-target="calcProgramFeePercent" title="Click para desbloquear">
                      <svg class="lock-icon-svg locked" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <circle cx="12" cy="7" r="4"/>
                      </svg>
                      <svg class="lock-icon-svg unlocked hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 9.9-1"/>
                      </svg>
                    </button>
                    <input type="text" class="calc-input-field percent" id="calcProgramFeePercent" value="25" readonly>
                    <span class="calc-input-suffix">%</span>
                  </div>
                </div>
                
                <div class="info-row calc-input-row">
                  <span class="info-row-label">Monthly Bank Fee</span>
                  <div class="calc-input-minimal protected" data-field="bankFee">
                    <button class="lock-toggle-btn" data-target="calcBankFee" title="Click para desbloquear">
                      <svg class="lock-icon-svg locked" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <circle cx="12" cy="7" r="4"/>
                      </svg>
                      <svg class="lock-icon-svg unlocked hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 9.9-1"/>
                      </svg>
                    </button>
                    <span class="calc-input-prefix">$</span>
                    <input type="text" class="calc-input-field" id="calcBankFee" value="9.95" readonly>
                  </div>
                </div>
                
                <div class="info-row">
                  <span class="info-row-label">Legal Plan</span>
                  <div class="calc-toggle-wrapper-inline" id="calcLegalPlanToggle">
                    <span id="calcLegalPlanStateHint" class="calc-legal-state-hint hidden" aria-live="polite"></span>
                    <span class="calc-toggle-label-small">Incluir ($24.99/mes)</span>
                    <div class="calc-toggle" id="calcLegalPlanSwitch">
                      <div class="calc-toggle-thumb"></div>
                    </div>
                  </div>
                </div>
                
                <div class="info-row calc-payment-day-row">
                  <span class="info-row-label">Monthly Payment Day</span>
                  <div class="calc-payment-day-wrapper">
                    <button id="calcPaymentDayTrigger" class="liquid-glass-btn calc-payment-day-trigger" type="button">
                      <span id="calcPaymentDayDisplay" class="calc-payment-day-display">Seleccionar fecha</span>
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                      </svg>
                    </button>
                    <div id="calcPaymentDayCalendar" class="custom-calendar calc-payment-day-calendar hidden">
                      <div class="calendar-header">
                        <button id="calcPaymentDayPrev" class="calendar-nav" type="button">
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"/>
                          </svg>
                        </button>
                        <span id="calcPaymentDayMonthYear" class="calendar-title"></span>
                        <button id="calcPaymentDayNext" class="calendar-nav" type="button">
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                          </svg>
                        </button>
                      </div>
                      <div class="calendar-weekdays">
                        <span>Dom</span><span>Lun</span><span>Mar</span><span>Mié</span>
                        <span>Jue</span><span>Vie</span><span>Sáb</span>
                      </div>
                      <div id="calcPaymentDayDays" class="calendar-days"></div>
                    </div>
                  </div>
                  <input type="hidden" id="calcFirstDepositDate" value="">
                </div>
              </div>
              
              <!-- Columna Derecha: Resultados -->
              <div class="info-column calc-results-column">
                <h4 class="calc-column-title">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:18px;height:18px;margin-right:6px;vertical-align:middle;">
                    <path d="M3 3v18h18"/>
                    <path d="M18 17V9"/>
                    <path d="M13 17V5"/>
                    <path d="M8 17v-3"/>
                  </svg>
                  Resultados
                </h4>
                
                <div class="info-row">
                  <span class="info-row-label">Est. Settlement Amount</span>
                  <span class="info-row-value mono" id="resultSettlement">$0.00</span>
                </div>
                
                <div class="info-row">
                  <span class="info-row-label">Total Program Fees</span>
                  <span class="info-row-value mono" id="resultProgramFees">$0.00</span>
                </div>
                
                <div class="info-row">
                  <span class="info-row-label">Total Legal Fees</span>
                  <span class="info-row-value mono" id="resultLegalFees">$0.00</span>
                </div>
                
                <div class="info-row">
                  <span class="info-row-label">Total Bank Fees</span>
                  <span class="info-row-value mono" id="resultBankFees">$0.00</span>
                </div>
                
                <div class="info-row highlight-row">
                  <span class="info-row-label">Total Program Cost</span>
                  <span class="info-row-value mono accent" id="resultTotalProgram">$0.00</span>
                </div>
                
                <div class="info-row savings-row">
                  <span class="info-row-label">Total Savings</span>
                  <span class="info-row-value mono" id="resultSavings">$0.00</span>
                </div>

                <div class="info-row">
                  <span class="info-row-label">Monthly Legal Fee</span>
                  <span class="info-row-value mono" id="resultMonthlyLegalFee">$0.00</span>
                </div>

                <div class="info-row">
                  <span class="info-row-label">Total Estimated Savings</span>
                  <span class="info-row-value mono" id="resultEstimatedSavings">$0.00</span>
                </div>

                <div class="info-row">
                  <span class="info-row-label">Monthly Payment Savings</span>
                  <span class="info-row-value mono" id="resultMonthlyPaymentSavings">$0.00</span>
                </div>
              </div>
            </div>
            
            <!-- Sección especial: Meses y Monthly Payment - Compacto -->
            <div class="calc-duration-payment-row">
              <!-- Program Duration -->
              <div class="calc-duration-compact">
                <div class="calc-duration-wheel-area">
                  <span class="calc-duration-label-compact">Program Duration</span>
                  <div class="months-inline-wheel-wrapper compact">
                    <div class="months-inline-wheel compact" id="monthsInlineWheel" role="spinbutton" aria-label="Program duration in months" aria-valuemin="6" aria-valuemax="120" aria-valuenow="48" tabindex="0">
                      <div class="months-wheel-track-inline" id="monthsWheelTrackInline"></div>
                    </div>
                  </div>
                </div>
                
                <!-- Botones rápidos debajo de la ruleta -->
                <div class="months-quick-buttons minimal under-wheel">
                  <button class="months-quick-btn minimal" data-months="12">12</button>
                  <button class="months-quick-btn minimal" data-months="24">24</button>
                  <button class="months-quick-btn minimal" data-months="36">36</button>
                  <button class="months-quick-btn minimal active" data-months="48">48</button>
                  <button class="months-quick-btn minimal" data-months="60">60</button>
                  <span class="months-unit-inline">months</span>
                </div>
                
                <input type="hidden" id="calcMonths" value="48">
              </div>
              
              <!-- Monthly Payment -->
              <div class="calc-monthly-payment-minimal">
                <div class="monthly-payment-content" id="copyMonthlyPayment" title="Click para copiar (meses + monto)">
                  <span class="monthly-payment-label-minimal">Monthly Payment</span>
                  <div class="monthly-payment-value-row">
                    <span class="monthly-payment-amount-minimal" id="resultMonthlyPayment">$0.00</span>
                    <svg class="copy-icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          
          <!-- Payment Schedule -->
          <div class="lead-info-card lead-info-card-wide payment-schedule-card">
            <div class="schedule-header">
              <h3 class="calculator-section-title" style="margin:0;padding:0;border:none;">Payment Schedule</h3>
              <span class="plan-duration-badge" id="planDurationText">4 años</span>
            </div>
            <div class="schedule-table-container">
              <table class="schedule-table">
                <thead>
                  <tr>
                    <th>Payment #</th>
                    <th>Payment Date</th>
                    <th>Payment Amount</th>
                    <th>Legal Fee</th>
                    <th>Bank Fee</th>
                    <th>Savings</th>
                  </tr>
                </thead>
                <tbody id="scheduleTableBody">
                  <!-- Generated dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        <!-- Sección Banking -->
        <div id="bankingSection" class="lead-content-grid hidden">
          <div class="lead-info-card lead-info-card-wide banking-main-card">
            <div class="two-column-layout banking-layout">
              <!-- Columna Izquierda: Información de la Cuenta -->
              <div class="info-column banking-account-column">
                <h4 class="calc-column-title">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:18px;height:18px;margin-right:6px;vertical-align:middle;">
                    <rect x="2" y="5" width="20" height="14" rx="2"/>
                    <line x1="2" y1="10" x2="22" y2="10"/>
                    <line x1="6" y1="14" x2="6" y2="14"/>
                    <line x1="10" y1="14" x2="10" y2="14"/>
                  </svg>
                  Bank Account Information
                </h4>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Routing Number</span>
                  <div class="banking-input-wrap">
                    <input type="text" class="banking-input" id="bankRoutingNumber" placeholder="Enter routing number" maxlength="20">
                  </div>
                </div>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Bank Account Number</span>
                  <div class="banking-input-wrap">
                    <input type="text" class="banking-input" id="bankAccountNumber" placeholder="Enter account number" maxlength="50">
                  </div>
                </div>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Account Type</span>
                  <div class="banking-select-wrap">
                    <select class="banking-select" id="bankAccountType">
                      <option value="Checking">Checking</option>
                      <option value="Savings">Savings</option>
                    </select>
                  </div>
                </div>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Bank Name</span>
                  <div class="banking-input-wrap">
                    <input type="text" class="banking-input" id="bankName" placeholder="Enter bank name" maxlength="120">
                  </div>
                </div>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Bank Phone Number</span>
                  <div class="banking-input-wrap">
                    <input type="tel" class="banking-input" id="bankPhone" placeholder="Enter bank phone" maxlength="40">
                  </div>
                </div>
                
                <!-- Campos expandibles - Sección Bank Address -->
                <div class="banking-expandable">
                  <button class="banking-expand-btn" data-target="bankAddressFields">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    <span>Bank Address</span>
                  </button>
                  <div id="bankAddressFields" class="banking-expandable-content hidden">
                    <div class="info-row banking-row">
                      <span class="info-row-label">Bank Address</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankAddress" placeholder="Street address" maxlength="180">
                      </div>
                    </div>
                    <div class="info-row banking-row">
                      <span class="info-row-label">Address Line 2</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankAddress2" placeholder="Apt, suite, etc." maxlength="180">
                      </div>
                    </div>
                    <div class="info-row banking-row">
                      <span class="info-row-label">Bank City</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankCity" placeholder="City" maxlength="120">
                      </div>
                    </div>
                    <div class="info-row banking-row">
                      <span class="info-row-label">Bank State</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankState" placeholder="State code (e.g. CA)" maxlength="2">
                      </div>
                    </div>
                    <div class="info-row banking-row">
                      <span class="info-row-label">Bank Zip</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankZip" placeholder="ZIP code" maxlength="10">
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Botón Get Bank Details -->
                <button class="banking-action-btn" id="btnGetBankDetails">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                    <circle cx="11" cy="11" r="8"/>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                  </svg>
                  Get Bank Details
                </button>
              </div>
              
              <!-- Columna Derecha: Información del Titular -->
              <div class="info-column banking-holder-column">
                <h4 class="calc-column-title">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:18px;height:18px;margin-right:6px;vertical-align:middle;">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Account Holder Information
                </h4>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Name On Account</span>
                  <div class="banking-input-wrap">
                    <input type="text" class="banking-input" id="bankNameOnAccount" placeholder="Full name on account" maxlength="120">
                  </div>
                </div>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Initial Payment Amount</span>
                  <div class="banking-input-wrap amount">
                    <span class="banking-input-prefix">$</span>
                    <input type="text" class="banking-input" id="bankInitialPayment" placeholder="0.00" maxlength="15">
                  </div>
                </div>
                
                <div class="info-row banking-row">
                  <span class="info-row-label">Day of Month for Subscription</span>
                  <div class="banking-input-wrap day-input">
                    <input type="number" class="banking-input" id="bankPaymentDay" placeholder="1-31" min="1" max="31">
                  </div>
                </div>
                
                <!-- Campos expandibles - Mother's Maiden Name -->
                <div class="banking-expandable">
                  <button class="banking-expand-btn" data-target="maidenNameField">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    <span>Mother's Maiden Name</span>
                  </button>
                  <div id="maidenNameField" class="banking-expandable-content hidden">
                    <div class="info-row banking-row">
                      <span class="info-row-label">Mother's Maiden Name</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankMothersMaiden" placeholder="Enter maiden name" maxlength="120">
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Campos expandibles - SS # -->
                <div class="banking-expandable">
                  <button class="banking-expand-btn" data-target="ssnField">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    <span>SS #</span>
                  </button>
                  <div id="ssnField" class="banking-expandable-content hidden">
                    <div class="info-row banking-row">
                      <span class="info-row-label">SS Number</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankSSN" placeholder="XXX-XX-XXXX" maxlength="11">
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Campos expandibles - Relationship -->
                <div class="banking-expandable">
                  <button class="banking-expand-btn" data-target="relationshipField">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    <span>Relationship To Customer</span>
                  </button>
                  <div id="relationshipField" class="banking-expandable-content hidden">
                    <div class="info-row banking-row">
                      <span class="info-row-label">Relationship</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankRelationship" placeholder="e.g. Self, Spouse" maxlength="60">
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Campos expandibles - Additional Info -->
                <div class="banking-expandable">
                  <button class="banking-expand-btn" data-target="additionalFields">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    <span>Additional Information</span>
                  </button>
                  <div id="additionalFields" class="banking-expandable-content hidden">
                    <div class="info-row banking-row">
                      <span class="info-row-label">Email</span>
                      <div class="banking-input-wrap">
                        <input type="email" class="banking-input" id="bankEmail" placeholder="email@example.com" maxlength="160">
                      </div>
                    </div>
                    <div class="info-row banking-row">
                      <span class="info-row-label">Date of Birth</span>
                      <div class="banking-input-wrap">
                        <input type="date" class="banking-input" id="bankDOB">
                      </div>
                    </div>
                    <div class="info-row banking-row">
                      <span class="info-row-label">Address</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankHolderAddress" placeholder="Street address" maxlength="180">
                      </div>
                    </div>
                    <div class="info-row banking-row">
                      <span class="info-row-label">Address Line 2</span>
                      <div class="banking-input-wrap">
                        <input type="text" class="banking-input" id="bankHolderAddress2" placeholder="Apt, suite, etc." maxlength="180">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Botón de guardar -->
            <div class="banking-save-section">
              <button class="banking-save-btn" id="btnSaveBankingInfo">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                  <polyline points="17 21 17 13 7 13 7 21"/>
                  <polyline points="7 3 7 8 15 8"/>
                </svg>
                Save Banking Information
              </button>
              <span id="bankingSaveStatus" class="banking-save-status"></span>
            </div>
          </div>
        </div>
        
        <div id="budgetSection" class="lead-content-grid hidden budget-section">
          <div class="lead-info-card lead-info-card-wide budget-main-card">
            <div class="budget-toolbar">
              <div class="budget-toolbar-left">
                <h3 class="budget-toolbar-title">Budget Workspace</h3>
                <div class="budget-subtabs" id="budgetSubtabs">
                  <button type="button" class="budget-subtab active" data-budget-tab="items">Budget Items</button>
                  <button type="button" class="budget-subtab" data-budget-tab="income">Income</button>
                  <button type="button" class="budget-subtab" data-budget-tab="hardship">Hardship</button>
                </div>
              </div>
              <div class="budget-toolbar-actions">
                <span id="budgetSaveStatus" class="budget-save-status">Sin cambios</span>
                <button id="budgetSaveBtn" type="button" class="budget-save-btn">Guardar Budget</button>
              </div>
            </div>

            <div class="two-column-layout budget-layout">
              <div class="info-column budget-form-column">
                <div class="budget-panels">
              <section class="budget-panel active" data-budget-panel="items">
                <article class="budget-card-group budget-card-group-merged">
                  <div class="budget-card-head">
                    <h4>Budget Items</h4>
                    <div class="budget-inner-tabs">
                      <button type="button" class="budget-inner-tab active" data-budget-inner-group="items" data-budget-inner-tab="housing">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 11l9-7 9 7"/><path d="M5 10.5V20h14v-9.5"/><path d="M10 20v-5h4v5"/></svg>
                        <span>Housing</span>
                      </button>
                      <button type="button" class="budget-inner-tab" data-budget-inner-group="items" data-budget-inner-tab="transportation">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 13l2-5h12l2 5"/><rect x="3" y="13" width="18" height="5" rx="1"/><circle cx="7" cy="19" r="1.5"/><circle cx="17" cy="19" r="1.5"/></svg>
                        <span>Transportation</span>
                      </button>
                      <button type="button" class="budget-inner-tab" data-budget-inner-group="items" data-budget-inner-tab="food">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 4l16 8-8 8z"/><circle cx="12" cy="10" r="1.2"/><circle cx="9" cy="13" r="1.1"/><circle cx="14.5" cy="14.5" r="1"/></svg>
                        <span>Food</span>
                      </button>
                      <button type="button" class="budget-inner-tab" data-budget-inner-group="items" data-budget-inner-tab="utilities">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 2L4 14h6l-1 8 9-12h-6z"/></svg>
                        <span>Utilities</span>
                      </button>
                      <button type="button" class="budget-inner-tab" data-budget-inner-group="items" data-budget-inner-tab="other">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="9"/><path d="M8.5 12h7"/><path d="M12 8.5v7"/></svg>
                        <span>Other</span>
                      </button>
                    </div>
                  </div>
                  <div class="budget-inner-panels">
                    <section class="budget-inner-panel active" data-budget-inner-group="items" data-budget-inner-panel="housing">
                      <div class="budget-category-block">
                        <h5>Housing</h5>
                        <div class="budget-field">
                          <label for="budgetHousingType">Rent / Own</label>
                          <select id="budgetHousingType" class="budget-select">
                            <option value="">Seleccionar</option>
                            <option value="rent">Rent</option>
                            <option value="own">Own</option>
                          </select>
                        </div>
                        <div class="budget-field"><label for="budgetHousingPayment">Housing Payment</label><div class="budget-money"><span>$</span><input id="budgetHousingPayment" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetHomeInsurance">Home Owners Insurance</label><div class="budget-money"><span>$</span><input id="budgetHomeInsurance" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetSecondaryHousingPayment">Secondary House Payment</label><div class="budget-money"><span>$</span><input id="budgetSecondaryHousingPayment" type="text" inputmode="decimal" /></div></div>
                      </div>
                    </section>
                    <section class="budget-inner-panel" data-budget-inner-group="items" data-budget-inner-panel="transportation">
                      <div class="budget-category-block">
                        <h5>Transportation</h5>
                        <div class="budget-field"><label for="budgetAutoPayments">Auto Payments</label><div class="budget-money"><span>$</span><input id="budgetAutoPayments" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetAutoInsurance">Auto Insurance</label><div class="budget-money"><span>$</span><input id="budgetAutoInsurance" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetRepairsMaintenance">Repairs / Maintenance</label><div class="budget-money"><span>$</span><input id="budgetRepairsMaintenance" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetGasoline">Gasoline</label><div class="budget-money"><span>$</span><input id="budgetGasoline" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetParking">Parking</label><div class="budget-money"><span>$</span><input id="budgetParking" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetCommuting">Commuting</label><div class="budget-money"><span>$</span><input id="budgetCommuting" type="text" inputmode="decimal" /></div></div>
                      </div>
                    </section>
                    <section class="budget-inner-panel" data-budget-inner-group="items" data-budget-inner-panel="food">
                      <div class="budget-category-block">
                        <h5>Food</h5>
                        <div class="budget-field"><label for="budgetGroceries">Groceries</label><div class="budget-money"><span>$</span><input id="budgetGroceries" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetEatingOut">Eating Out</label><div class="budget-money"><span>$</span><input id="budgetEatingOut" type="text" inputmode="decimal" /></div></div>
                      </div>
                    </section>
                    <section class="budget-inner-panel" data-budget-inner-group="items" data-budget-inner-panel="utilities">
                      <div class="budget-category-block">
                        <h5>Utilities</h5>
                        <div class="budget-field"><label for="budgetUtilityEnergy">Average Gas / Electric / Oil</label><div class="budget-money"><span>$</span><input id="budgetUtilityEnergy" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetUtilityPhone">Average Phone Bill (including cell)</label><div class="budget-money"><span>$</span><input id="budgetUtilityPhone" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetUtilityWater">Average Water / Sewer / Garbage</label><div class="budget-money"><span>$</span><input id="budgetUtilityWater" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetUtilityInternet">Cable / Satellite / Internet Bill</label><div class="budget-money"><span>$</span><input id="budgetUtilityInternet" type="text" inputmode="decimal" /></div></div>
                      </div>
                    </section>
                    <section class="budget-inner-panel" data-budget-inner-group="items" data-budget-inner-panel="other">
                      <div class="budget-category-block">
                        <h5>Other Expenses</h5>
                        <div class="budget-field"><label for="budgetOtherExpenses">Other Expenses</label><div class="budget-money"><span>$</span><input id="budgetOtherExpenses" type="text" inputmode="decimal" /></div></div>
                      </div>
                    </section>
                  </div>
                </article>
              </section>

              <section class="budget-panel" data-budget-panel="income">
                <article class="budget-card-group budget-card-group-merged budget-income-box">
                  <div class="budget-card-head">
                    <h4>Income</h4>
                    <div class="budget-inner-tabs">
                      <button type="button" class="budget-inner-tab active" data-budget-inner-group="income" data-budget-inner-tab="applicant">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="8" r="3.5"/><path d="M5 20c.7-3.3 3.4-5 7-5s6.3 1.7 7 5"/></svg>
                        <span>Applicant</span>
                      </button>
                      <button type="button" class="budget-inner-tab" data-budget-inner-group="income" data-budget-inner-tab="coapp">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="9" cy="8" r="3"/><circle cx="16.5" cy="9" r="2.5"/><path d="M3.5 20c.6-3 2.9-4.6 5.5-4.6s4.9 1.6 5.5 4.6"/><path d="M14 19.6c.5-2.2 2.1-3.5 4.2-3.5 1 0 2 .3 2.8 1"/></svg>
                        <span>Co-Applicant</span>
                      </button>
                    </div>
                  </div>
                  <div class="budget-inner-panels">
                    <section class="budget-inner-panel active" data-budget-inner-group="income" data-budget-inner-panel="applicant">
                      <div class="budget-category-block">
                        <h5>Applicant Income</h5>
                        <div class="budget-field"><label for="budgetIncomeApplicantNetMonthly">Net Monthly Income</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantNetMonthly" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantSocialSecurity">Social Security</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantSocialSecurity" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantAlimony">Alimony</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantAlimony" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantRetirement">Retirement</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantRetirement" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantHouseholdTotal">Total HouseHold Income</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantHouseholdTotal" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantFixedIncome">Applicant Fixed Income</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantFixedIncome" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantUnemployment">Unemployment</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantUnemployment" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantChildSupport">Child Support</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantChildSupport" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeApplicantOther">Other</label><div class="budget-money"><span>$</span><input id="budgetIncomeApplicantOther" type="text" inputmode="decimal" /></div></div>
                      </div>
                    </section>
                    <section class="budget-inner-panel" data-budget-inner-group="income" data-budget-inner-panel="coapp">
                      <div class="budget-category-block">
                        <h5>Co-Applicant Income</h5>
                        <div class="budget-field"><label for="budgetIncomeCoappNetMonthly">Net Monthly Income</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappNetMonthly" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappSocialSecurity">Social Security</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappSocialSecurity" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappAlimony">Alimony</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappAlimony" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappRetirement">Retirement</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappRetirement" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappHouseholdTotal">Total HouseHold Income</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappHouseholdTotal" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappFixedIncome">Applicant Fixed Income</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappFixedIncome" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappUnemployment">Unemployment</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappUnemployment" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappChildSupport">Child Support</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappChildSupport" type="text" inputmode="decimal" /></div></div>
                        <div class="budget-field"><label for="budgetIncomeCoappOther">Other</label><div class="budget-money"><span>$</span><input id="budgetIncomeCoappOther" type="text" inputmode="decimal" /></div></div>
                      </div>
                    </section>
                  </div>
                </article>
              </section>

              <section class="budget-panel" data-budget-panel="hardship">
                <article class="budget-card-group budget-card-group-merged">
                  <div class="budget-card-head">
                    <h4>Hardship</h4>
                  </div>
                  <div class="budget-hardship-grid">
                    <div class="budget-field">
                      <label for="budgetHardshipReason">Hardship Reason</label>
                      <select id="budgetHardshipReason" class="budget-select budget-hardship-reason-select">
                        <option value="">Seleccionar razón...</option>
                        <option value="loss_of_income">Loss of Income</option>
                        <option value="medical">Medical Issues</option>
                        <option value="divorce">Divorce / Separation</option>
                        <option value="inflation">Inflation / Cost of Living</option>
                        <option value="business_failure">Business Failure</option>
                        <option value="unexpected_expenses">Unexpected Expenses</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                    <div class="budget-hardship-textareas">
                      <div class="budget-field">
                        <label for="budgetHardshipDetailEs">Detailed Hardship Reason (Español)</label>
                        <textarea id="budgetHardshipDetailEs" class="budget-textarea" rows="5" placeholder="Describe la situación en español..."></textarea>
                      </div>
                      <div class="budget-field">
                        <label for="budgetHardshipDetailEn">Detailed Hardship Reason (English)</label>
                        <textarea id="budgetHardshipDetailEn" class="budget-textarea" rows="5" placeholder="Describe the situation in English..."></textarea>
                      </div>
                    </div>
                  </div>
                </article>
              </section>
                </div>
              </div>
              <aside class="info-column budget-details-column" aria-label="Budget details">
                <h4>Budget Details</h4>
                <div class="info-row">
                  <span class="info-row-label">Total Monthly Income</span>
                  <span class="info-row-value mono" id="budgetDetailTotalIncome">$0.00</span>
                </div>
                <div class="info-row">
                  <span class="info-row-label">Total HouseHold Expenses</span>
                  <span class="info-row-value mono" id="budgetDetailTotalExpenses">$0.00</span>
                </div>
                <div class="info-row">
                  <span class="info-row-label">Monthly debt-to-income</span>
                  <span class="info-row-value mono" id="budgetDetailDti">0.00%</span>
                </div>
                <div class="info-row">
                  <span class="info-row-label">Monthly program cost</span>
                  <span class="info-row-value mono" id="budgetDetailProgramCost">$0.00</span>
                </div>
                <div class="info-row">
                  <span class="info-row-label">Total monthly expenses</span>
                  <span class="info-row-value mono" id="budgetDetailTotalMonthlyExpenses">$0.00</span>
                </div>
                <div class="info-row">
                  <span class="info-row-label">Monthly debt-to-income (with program)</span>
                  <span class="info-row-value mono" id="budgetDetailDtiWithProgram">0.00%</span>
                </div>
                <div class="info-row budget-funds-row">
                  <span class="info-row-label">Funds Available</span>
                  <span class="info-row-value mono" id="budgetDetailFundsAvailable">$0.00</span>
                </div>
              </aside>
              </div>
            </div>
          </div>
        </div>
        <!-- NUEVA SECCIÓN CREDITORS - REDISEÑO LIQUID GLASS -->
        <div id="creditorsSection" class="lead-content-grid hidden" style="grid-template-columns: 1fr;">
          <div class="creditors-glass-container">
            
            <!-- Resumen compacto + Botón -->
            <div class="creditors-summary-inline">
              <div class="summary-badges-wrap">
                <div class="summary-badges" id="creditorsMainSummaryBadges">
                  <span class="summary-badge total">
                    <small>TOTAL</small> <strong id="creditorsTotalDebt">$0.00</strong>
                  </span>
                  <span class="summary-badge count">
                    <small>CUENTAS</small> <strong id="creditorsAccountsCount">0</strong>
                  </span>
                  <span class="summary-badge included">
                    <small>INCLUIDAS</small> <strong id="creditorsIncludedAmount">$0.00</strong>
                  </span>
                  <span class="summary-badge pastdue">
                    <small>VENCIDO</small> <strong id="creditorsPastDueTotal">$0.00</strong>
                  </span>
                  <span class="summary-badge fico">
                    <small>FICO</small> <strong id="creditorsFicoScore">Pendiente</strong>
                  </span>
                </div>
                <div class="summary-badges summary-badges-party hidden" id="creditorsPartySummaryBadges" hidden>
                  <span class="summary-badge total">
                    <small>TOTAL</small> <strong id="creditorsPartyTotalDebt">$0.00</strong>
                  </span>
                  <span class="summary-badge count">
                    <small>CUENTAS</small> <strong id="creditorsPartyAccountsCount">0</strong>
                  </span>
                  <span class="summary-badge included">
                    <small>INCLUIDAS</small> <strong id="creditorsPartyIncludedAmount">$0.00</strong>
                  </span>
                  <span class="summary-badge party-applicant-debt">
                    <small>APP TOTAL</small> <strong id="creditorsApplicantDebt">$0.00</strong>
                  </span>
                  <span class="summary-badge party-applicant-fico">
                    <small>APP FICO</small> <strong id="creditorsApplicantFico">Pendiente</strong>
                  </span>
                  <span class="summary-badge party-coapp-debt">
                    <small>COAPP TOTAL</small> <strong id="creditorsCoappDebt">$0.00</strong>
                  </span>
                  <span class="summary-badge party-coapp-fico">
                    <small>COAPP FICO</small> <strong id="creditorsCoappFico">Pendiente</strong>
                  </span>
                </div>
              </div>
              <button class="btn-apply-calc" id="creditorsApplyTotalBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                  <path d="M12 2v20M2 12h20"/>
                </svg>
                Aplicar
              </button>
            </div>

            <!-- Lista de creditors guardados -->
            <div class="creditors-saved-section" id="creditorsSavedSection">
              <div class="creditors-table-container">
                <table class="creditors-table" id="creditorsSavedTable">
                  <thead id="creditorsTableHead">
                    <!-- Se genera dinámicamente desde JS para permitir reordenar -->
                  </thead>
                  <tbody id="creditorsSavedBody">
                    <tr>
                      <td colspan="12" class="empty-cell">
                        <div class="creditors-empty-status">
                          <span class="status-text" id="creditorsStatus">Sube reportes de crédito desde Archivos para extraer deudas automáticamente.</span>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </main>

  <div id="notesTemplatesModal" class="notes-templates-modal hidden" aria-hidden="true">
    <div id="notesTemplatesModalBackdrop" class="notes-templates-modal-backdrop"></div>
    <div class="notes-templates-modal-content" role="dialog" aria-modal="true" aria-labelledby="notesTemplatesModalTitle">
      <button class="modal-close-mac notes-templates-modal-close" id="notesTemplatesModalClose" type="button" title="Cerrar"></button>
      <div class="notes-templates-modal-header">
        <h3 id="notesTemplatesModalTitle">Editar mis templates</h3>
      </div>
      <div class="notes-templates-modal-body">
        <div class="notes-templates-manager-list">
          <label class="notes-templates-manager-label" for="notesTemplatesManagerSelect">Mis templates</label>
          <select id="notesTemplatesManagerSelect" class="notes-templates-manager-select" size="8" aria-label="Lista de templates"></select>
          <button id="notesTemplatesManagerNewBtn" class="notes-btn" type="button">Nuevo</button>
        </div>
        <div class="notes-templates-manager-editor">
          <label class="notes-templates-manager-label" for="notesTemplatesManagerName">Nombre</label>
          <input id="notesTemplatesManagerName" class="notes-templates-manager-input" type="text" maxlength="120" placeholder="Ej: Contacto inicial" />
          <label class="notes-templates-manager-label" for="notesTemplatesManagerContent">Contenido</label>
          <textarea id="notesTemplatesManagerContent" class="notes-templates-manager-textarea" maxlength="5000" placeholder="Escribe el contenido del template..."></textarea>
          <div class="notes-templates-manager-actions">
            <button id="notesTemplatesManagerSaveBtn" class="notes-btn primary" type="button">Guardar</button>
            <button id="notesTemplatesManagerSaveAsNewBtn" class="notes-btn" type="button">Guardar como nuevo</button>
            <button id="notesTemplatesManagerDeleteBtn" class="notes-btn danger" type="button">Eliminar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de clasificación de archivo -->
  <div id="fileMetaModal" class="file-meta-modal hidden" aria-hidden="true">
    <div class="file-meta-modal-backdrop"></div>
    <div class="file-meta-modal-content" role="dialog" aria-modal="true" aria-labelledby="fileMetaModalTitle">
      <div class="file-meta-modal-header">
        <h3 id="fileMetaModalTitle">Clasificar archivo</h3>
        <p class="file-meta-modal-subtitle" id="fileMetaFileName">Archivo</p>
      </div>
      <form id="fileMetaForm" class="file-meta-modal-form">
        <div class="file-meta-field">
          <label for="fileDocType">Tipo de archivo</label>
          <select id="fileDocType" required>
            <option value="">Seleccionar tipo...</option>
            <option value="official_document">Documento oficial</option>
            <option value="credit_report">Reporte de crédito</option>
            <option value="income_proof">Prueba de ingresos</option>
            <option value="bank_statement">Estado de cuenta bancario</option>
            <option value="contract">Contrato</option>
            <option value="other">Otro</option>
          </select>
        </div>
        <div class="file-meta-field hidden" id="fileCreditPartyWrap">
          <label for="fileCreditParty">La deuda corresponde a</label>
          <select id="fileCreditParty">
            <option value="">Seleccionar parte...</option>
            <option value="applicant">Applicant</option>
            <option value="coapp">Co-Applicant</option>
          </select>
        </div>
        <div class="file-meta-modal-actions">
          <button type="button" class="file-meta-modal-btn" id="fileMetaCancelBtn">Cancelar</button>
          <button type="submit" class="file-meta-modal-btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para visualizar archivos -->
  <div id="fileViewerModal" class="file-viewer-modal hidden" aria-hidden="true">
    <div class="file-viewer-modal-backdrop" onclick="closeFileViewer()"></div>
    <div class="file-viewer-modal-content">
      <div class="file-viewer-modal-header">
        <span id="fileViewerTitle" class="file-viewer-modal-title">Vista previa</span>
        <button class="file-viewer-modal-close" onclick="closeFileViewer()" title="Cerrar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="file-viewer-modal-body" id="fileViewerBody">
        <!-- El contenido se carga dinámicamente -->
      </div>
      <div class="file-viewer-modal-footer">
        <button id="fileViewerDownloadBtn" class="file-viewer-btn primary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Descargar
        </button>
      </div>
    </div>
  </div>

  <script src="vendor/pdf.min.js"></script>
  <script src="vendor/tesseract.min.js"></script>
  <script src="credit-report-auto-extract.js?v=20260218b"></script>
  <script src="crm-helpers.js?v=20260216b"></script>
  <script src="client.js?v=20260219a"></script>
  <script src="budget.js?v=20260219b"></script>
  <script src="quick-actions.js?v=20260216c"></script>
  <script src="creditors-redesign.js?v=20260218p"></script>
</body>
</html>








